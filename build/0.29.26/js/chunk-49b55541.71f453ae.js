(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49b55541"],{ad35:function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[e("breadcrumb",[e("breadcrumb-plugin"),e("breadcrumb-pin-point"),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")(t.$t("sales visitation"))))])],1),e("tab-menu"),e("div",{staticClass:"row"},[e("p-block",[e("div",{staticClass:"input-group block"},[e("router-link",{staticClass:"input-group-prepend",attrs:{to:"/plugin/pin-point/sales-visitation-form/create"}},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fa fa-plus"})])]),e("p-form-input",{ref:"searchText",staticClass:"btn-block",attrs:{id:"search-text",name:"search-text",placeholder:"Search",value:t.searchText},on:{input:t.filterSearch}})],1),e("div",{staticClass:"text-center font-size-sm mb-10"},[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.isFilterOpen=!t.isFilterOpen}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("advance filter")))+" "),e("i",{staticClass:"fa fa-caret-down"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isFilterOpen,expression:"isFilterOpen"}],staticClass:"card",class:{fadeIn:t.isFilterOpen}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"date-start",name:"date-start",label:t.$t("date start"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"date",label:"date"},model:{value:t.date.start,callback:function(e){t.$set(t.date,"start",e)},expression:"date.start"}})],1)])],1),e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"date-end",name:"date-end",label:t.$t("date end"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"date",label:"date"},model:{value:t.date.end,callback:function(e){t.$set(t.date,"end",e)},expression:"date.end"}})],1)])],1),e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"filter-item",name:"filter-item",label:t.$t("filter item"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("span",{staticClass:"select-link",on:{click:function(e){return t.$refs.item.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.itemName||t.$t("select")))+" ")])])])],1),e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"filter-payment-method",name:"filter-payment-method",label:t.$t("payment method"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("span",{staticClass:"select-link",on:{click:function(e){return t.$refs.paymentable.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.paymentName||t.$t("select")))+" ")])])])],1),e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"filter-branch",name:"filter-branch",label:t.$t("branch"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("span",{staticClass:"select-link",on:{click:function(e){return t.$refs.branch.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.branchName||t.$t("select")))+" ")])])])],1),e("div",{staticClass:"col-sm-2 text-center"},[e("p-form-row",{attrs:{id:"filter-item-sold",name:"filter-item-sold",label:t.$t("item sold"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("span",{staticClass:"select-link",on:{click:function(e){return t.$refs.itemSold.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.itemSoldLabel||t.$t("select")))+" ")])])])],1)]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 ml-10 mb-10"},[e("button",{staticClass:"btn btn-sm btn-secondary mr-5",attrs:{type:"button",disabled:t.isExporting},on:{click:function(e){return t.exportData("SalesVisitationReport")}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isExporting,expression:"isExporting"}],staticClass:"fa fa-asterisk fa-spin"}),t._v(" "+t._s(t._f("uppercase")(t.$t("export report")))+" ")]),e("button",{staticClass:"btn btn-sm btn-secondary mr-5",attrs:{type:"button",disabled:t.isExporting},on:{click:function(e){return t.exportData("ChartInterestReason")}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isExporting,expression:"isExporting"}],staticClass:"fa fa-asterisk fa-spin"}),t._v(" "+t._s(t._f("uppercase")(t.$t("export interest reason")))+" ")]),e("button",{staticClass:"btn btn-sm btn-secondary mr-5",attrs:{type:"button",disabled:t.isExporting},on:{click:function(e){return t.exportData("ChartNoInterestReason")}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isExporting,expression:"isExporting"}],staticClass:"fa fa-asterisk fa-spin"}),t._v(" "+t._s(t._f("uppercase")(t.$t("export no interest reason")))+" ")]),e("button",{staticClass:"btn btn-sm btn-secondary mr-5",attrs:{type:"button",disabled:t.isExporting},on:{click:function(e){return t.exportData("ChartSimilarProduct")}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isExporting,expression:"isExporting"}],staticClass:"fa fa-asterisk fa-spin"}),t._v(" "+t._s(t._f("uppercase")(t.$t("export similar product")))+" ")]),e("hr",{directives:[{name:"show",rawName:"v-show",value:t.downloadLink,expression:"downloadLink"}]}),e("a",{directives:[{name:"show",rawName:"v-show",value:t.downloadLink,expression:"downloadLink"}],attrs:{href:t.downloadLink}},[t._v(t._s(t.downloadLink))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.downloadLink,expression:"downloadLink"}]},[t._v("(expired in 24 hour)")])])])]),e("hr"),e("p-block-inner",{attrs:{"is-loading":t.isLoading}},[e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",{staticStyle:{"min-width":"50px"}},[t._v(" # ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("photo"))+" ")]),e("th",{staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.$t("date"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("sales"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("group"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("customer"))+" ")]),e("th",{staticStyle:{"min-width":"250px"}},[t._v(" "+t._s(t.$t("address"))+" ")]),e("th",{staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.$t("phone"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("interest reason"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("no interest reason"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("similar product"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("notes"))+" ")]),e("th",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(t.$t("item"))+" ")]),e("th",{staticClass:"text-right",staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.$t("quantity"))+" ")]),e("th",{staticClass:"text-right",staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.$t("price"))+" ")])]),t._l(t.forms,(function(s,a){return[s.details&&s.details.length>0?t._l(s.details,(function(i,n){return e("tr",{key:a+"-"+n,attrs:{slot:"p-body"},slot:"p-body"},[e("th",[t._v(" "+t._s(t.page*t.limit-t.limit+a+1)),s.details.length>1?[t._v(" ."+t._s(++n)+" ")]:t._e()],2),e("td",[s.photo?[e("img",{attrs:{src:s.photo,alt:"",width:"150px"}})]:t._e()],2),e("td",[t._v(" "+t._s(t._f("dateFormat")(s.form.date,"DD MMMM YYYY HH:mm"))+" ")]),e("td",[t._v(t._s(s.form.created_by.first_name)+" "+t._s(s.form.created_by.last_name))]),e("td",[t._v(t._s(s.group))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.address))]),e("td",[t._v(t._s(s.phone))]),e("td",[t._l(s.interest_reasons,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td",[t._l(s.no_interest_reasons,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td",[t._l(s.similar_products,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td",[t._v(" "+t._s(s.notes)+" ")]),e("td",[t._v(" "+t._s(i.item.name)+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(i.quantity))+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(i.price))+" ")])])})):[e("tr",{key:a,attrs:{slot:"p-body"},slot:"p-body"},[e("th",[t._v(t._s(t.page*t.limit-t.limit+a+1))]),e("td",[s.photo?[e("img",{attrs:{src:s.photo,alt:"",width:"150px"}})]:t._e()],2),e("td",[t._v(t._s(t._f("dateFormat")(s.form.date,"DD MMMM YYYY HH:mm")))]),e("td",[t._v(t._s(s.form.created_by.first_name)+" "+t._s(s.form.created_by.last_name))]),e("td",[t._v(t._s(s.group))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.address))]),e("td",[t._v(t._s(s.phone))]),e("td",[t._l(s.interest_reasons,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td",[t._l(s.no_interest_reasons,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td",[t._l(s.similar_products,(function(s,a){return[e("p",{key:a,staticClass:"mb-0"},[t._v(" - "+t._s(s.name)+" ")])]}))],2),e("td"),e("td"),e("td")])]]}))],2),e("p-pagination",{attrs:{"current-page":t.page,"last-page":t.lastPage},on:{updatePage:t.updatePage}})],1)],1)],1),e("m-branch",{ref:"branch",attrs:{"clear-button":!0},on:{choosen:t.chooseBranch}}),e("m-item",{ref:"item",attrs:{"create-button":!1},on:{choosen:t.chooseItem}}),e("m-item-sold",{ref:"itemSold",on:{choosen:t.chooseItemSold}}),e("m-payment-method",{ref:"paymentable",on:{choosen:t.choosePayment}})],1)},i=[],n=s("5530"),r=(s("14d9"),s("ac1f"),s("841c"),s("d3b7"),s("159b"),s("fabd")),o=s("5ae6"),l=s("bc27"),c=s("8e1a"),d=s("feee"),h=s("b047"),p=s.n(h),m=s("2f62"),_={components:{TabMenu:r["a"],Breadcrumb:o["a"],BreadcrumbPlugin:l["a"],BreadcrumbPinPoint:c["a"],PointTable:d["a"]},data:function(){return{date:{start:this.$moment(this.$route.query.date_from).format("YYYY-MM-DD 00:00:00"),end:this.$moment(this.$route.query.date_to).format("YYYY-MM-DD 23:59:59")},branch:{},branchId:null,branchName:"",isFilterOpen:!1,isLoading:!1,isExporting:!1,isDropdown:!1,downloadLink:"",searchText:"",limit:10,page:1*this.$route.query.page||1,lastPage:1,itemSoldKey:"",itemSoldLabel:"",itemId:null,itemName:"",paymentKey:"",paymentName:""}},computed:Object(n["a"])(Object(n["a"])({},Object(m["c"])("pluginPinPointSalesVisitationForm",["forms","pagination"])),Object(m["c"])("auth",["authUser"])),watch:{date:{handler:function(){this.$router.push({query:Object(n["a"])(Object(n["a"])({},this.$route.query),{},{date_from:this.date.start,date_to:this.date.end})}),this.search()},deep:!0}},created:function(){this.search()},methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])("pluginPinPointSalesVisitationForm",["get","export"])),{},{toggleBtnDropdown:function(){this.isDropdown=!this.isDropdown},updatePage:function(t){this.page=t,this.search()},filterSearch:p()((function(t){this.$router.push({query:{search:t}}),this.searchText=t,this.page=1,this.search()}),300),onClickSearchButton:function(){this.search()},check:function(t){this.$alert.error("",t.photo)},chooseBranch:function(t){var e=this;this.branchId=null,this.branchName="",this.authUser.branches.forEach((function(s){t.id==s.id&&(e.branchId=t.id,e.branchName=t.name)})),this.search()},chooseItem:function(t){this.itemId=t.id,this.itemName=t.name,this.search()},chooseItemSold:function(t){this.itemSoldKey=t.key,this.itemSoldLabel=t.label,this.search()},choosePayment:function(t){this.paymentName=t.name,this.paymentKey=t.key,this.search()},search:function(){var t=this;this.isLoading=!0,this.get({params:{join:"form",date_from:this.date.start,date_to:this.date.end,fields:"sales_visitation.*",sort_by:"-form.date",filter_like:{"sales_visitation.name":this.searchText,"sales_visitation.group":this.searchText,"sales_visitation.address":this.searchText,"sales_visitation.district":this.searchText,"sales_visitation.sub_district":this.searchText,"sales_visitation.phone":this.searchText,"sales_visitation.notes":this.searchText},limit:this.limit,page:this.page,payment_method:this.paymentKey,branch_id:this.branchId,item_id:this.itemId,item_sold:this.itemSoldKey}}).then((function(e){t.isLoading=!1,t.lastPage=t.pagination.last_page})).catch((function(e){t.isLoading=!1}))},exportData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isExporting=!0;var s=new Date(this.date.start),a=new Date(this.date.end),i=Math.abs(a-s),n=Math.ceil(i/864e5);if(n>31)return this.isExporting=!1,void this.$alert.error("","Export tidak bisa lebih dari 1 bulan");this.toggleBtnDropdown(),this.export({date_from:this.date.start,date_to:this.date.end,file_export:e,branch_id:this.branchId}).then((function(e){t.downloadLink=e.data.url})).catch((function(t){})).then((function(){t.isExporting=!1}))}})},u=_,b=s("2877"),f=Object(b["a"])(u,a,i,!1,null,null,null);e["default"]=f.exports},fabd:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-10"},[e("ul",{staticClass:"nav nav-tabs nav-tabs-alt",attrs:{"data-toggle":"tabs",role:"tablist"}},[t._t("default"),t.$permission.has("create pin point sales visitation form")||t.$permission.has("read pin point sales visitation form")?e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/pin-point/sales-visitation-form","active-class":"active"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("sales visitation"))))])])],1):t._e(),t._t("right")],2)])},i=[],n={data:function(){return{id:this.$route.params.id}}},r=n,o=s("2877"),l=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-49b55541.71f453ae.js.map
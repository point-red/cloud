(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-647c298a"],{"099a":function(t,e){function o(t,e,o){var a=o-1,r=t.length;while(++a<r)if(t[a]===e)return a;return-1}t.exports=o},"0b07":function(t,e,o){var a=o("34ac"),r=o("3698");function n(t,e){var o=r(t,e);return a(o)?o:void 0}t.exports=n},1290:function(t,e){function o(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=o},1368:function(t,e,o){var a=o("da03"),r=function(){var t=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function n(t){return!!r&&r in t}t.exports=n},"1efc":function(t,e){function o(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=o},"1fc8":function(t,e,o){var a=o("4245");function r(t,e){var o=a(this,t),r=o.size;return o.set(t,e),this.size+=o.size==r?0:1,this}t.exports=r},"208e":function(t,e,o){"use strict";var a=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/sales"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("sales")))+" ")])},r=[],n=o("2877"),i={},s=Object(n["a"])(i,a,r,!1,null,null,null);e["a"]=s.exports},2478:function(t,e,o){var a=o("4245");function r(t){return a(this,t).get(t)}t.exports=r},25241:function(t,e,o){var a=o("6044"),r="__lodash_hash_undefined__";function n(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=a&&void 0===e?r:e,this}t.exports=n},"28c9":function(t,e){function o(){this.__data__=[],this.size=0}t.exports=o},"2b03":function(t,e){function o(t,e,o,a){var r=t.length,n=o+(a?1:-1);while(a?n--:++n<r)if(e(t[n],n,t))return n;return-1}t.exports=o},"2c66":function(t,e,o){var a=o("d612"),r=o("8db33"),n=o("5edf"),i=o("c584"),s=o("750a"),l=o("ac41"),c=200;function u(t,e,o){var u=-1,m=r,d=t.length,f=!0,h=[],p=h;if(o)f=!1,m=n;else if(d>=c){var b=e?null:s(t);if(b)return l(b);f=!1,m=i,p=new a}else p=e?[]:h;t:while(++u<d){var v=t[u],_=e?e(v):v;if(v=o||0!==v?v:0,f&&_===_){var F=p.length;while(F--)if(p[F]===_)continue t;e&&p.push(_),h.push(v)}else m(p,_,o)||(p!==h&&p.push(_),h.push(v))}return h}t.exports=u},"34ac":function(t,e,o){var a=o("9520"),r=o("1368"),n=o("1a8c"),i=o("dc57"),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,m=c.toString,d=u.hasOwnProperty,f=RegExp("^"+m.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(t){if(!n(t)||r(t))return!1;var e=a(t)?f:l;return e.test(i(t))}t.exports=h},3698:function(t,e){function o(t,e){return null==t?void 0:t[e]}t.exports=o},4245:function(t,e,o){var a=o("1290");function r(t,e){var o=t.__data__;return a(e)?o["string"==typeof e?"string":"hash"]:o.map}t.exports=r},"47f5":function(t,e,o){var a=o("2b03"),r=o("d9a8"),n=o("099a");function i(t,e,o){return e===e?n(t,e,o):a(t,r,o)}t.exports=i},"49f4":function(t,e,o){var a=o("6044");function r(){this.__data__=a?a(null):{},this.size=0}t.exports=r},"588c":function(t,e,o){"use strict";o.r(e);o("b64b"),o("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[e("breadcrumb",[e("breadcrumb-sales"),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")(t.$t("sales order"))))])],1),e("sales-menu"),e("div",{staticClass:"mt-2"},[e("h2",{staticClass:"mb-0"},[t._v(" Dashboard Penjualan Berdasarkan Item ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",[t._v("Product")]),e("th",[t._v("Total")])]),t._l(Object.keys(t.reportItem),(function(o,a){return[e("tr",{key:"product-item-".concat(a),attrs:{slot:"p-body"},slot:"p-body"},[e("td",[t._v(t._s(t.reportItem[o].name))]),e("td",[t._v(t._s(t._f("numberFormat")(t.reportItem[o].total)))])])]}))],2)],1),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.showItemFilter=!t.showItemFilter}}},[t._v(" "+t._s(t.showItemFilter?"Show Chart":"Filter")+" ")])]),e("line-chart",{directives:[{name:"show",rawName:"v-show",value:!t.showItemFilter,expression:"!showItemFilter"}],ref:"linechart-item",attrs:{"chart-title":t._f("uppercase")("penjualan berdasarkan item"),"chart-label":t.itemReportLabels,"chart-data":t.itemReportValues,"line-color":"#409ce8"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showItemFilter,expression:"showItemFilter"}],staticStyle:{height:"394px"}},[e("div",{staticClass:"row bg-white p-3 m-2 card"},[e("div",{staticClass:"col-xl-6 d-flex flex-column justify-content-around"},[e("p-form-row",{attrs:{id:"item-date-start",name:"item-date-start",label:t.$t("date start"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"item-date-start-input",label:"Date Start"},model:{value:t.itemFilter.dateStart,callback:function(e){t.$set(t.itemFilter,"dateStart",e)},expression:"itemFilter.dateStart"}})],1)]),e("p-form-row",{attrs:{id:"item-date-end",name:"item-date-end",label:t.$t("date end"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"item-date-end-input",label:"Date End"},model:{value:t.itemFilter.dateEnd,callback:function(e){t.$set(t.itemFilter,"dateEnd",e)},expression:"itemFilter.dateEnd"}})],1)])],1),e("div",{staticClass:"col-xl-6"},[e("p-form-row",{attrs:{id:"item-date-end",name:"item-date-end",label:"Filter by Item","is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("button",{staticClass:"d-block mb-2 btn-link",on:{click:function(e){return t.$refs["first-item"].open()}}},[t._v(" "+t._s(t.itemFilter.item.firstItem?t.itemFilter.item.firstItem.label:"Select Item")+" ")]),e("m-item",{ref:"first-item",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseItem("firstItem",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["second-item"].open()}}},[t._v(" "+t._s(t.itemFilter.item.secondItem?t.itemFilter.item.secondItem.label:"Select Item")+" ")]),e("m-item",{ref:"second-item",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseItem("secondItem",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["third-item"].open()}}},[t._v(" "+t._s(t.itemFilter.item.thirdItem?t.itemFilter.item.thirdItem.label:"Select Item")+" ")]),e("m-item",{ref:"third-item",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseItem("thirdItem",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["fourth-item"].open()}}},[t._v(" "+t._s(t.itemFilter.item.fourthItem?t.itemFilter.item.fourthItem.label:"Select Item")+" ")]),e("m-item",{ref:"fourth-item",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseItem("fourthItem",e)}}}),e("button",{staticClass:"d-block mt-2 btn-link",on:{click:function(e){return t.$refs["fifth-item"].open()}}},[t._v(" "+t._s(t.itemFilter.item.fifthItem?t.itemFilter.item.fifthItem.label:"Select Item")+" ")]),e("m-item",{ref:"fifth-item",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseItem("fifthItem",e)}}})],1)])],1),e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:t.getReportByItem}},[t._v(" Filter ")])])])],1)])]),e("div",{staticClass:"mt-2"},[e("h2",{staticClass:"mb-0"},[t._v(" Dashboard Penjualan Berdasarkan Customer ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",[t._v("Customer")]),e("th",[t._v("Total")])]),t._l(Object.keys(t.reportCustomer),(function(o,a){return[e("tr",{key:"product-item-".concat(a),attrs:{slot:"p-body"},slot:"p-body"},[e("td",[t._v(t._s(t.reportCustomer[o].name))]),e("td",[t._v(t._s(t._f("numberFormat")(t.reportCustomer[o].total)))])])]}))],2)],1),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.showCustomerFilter=!t.showCustomerFilter}}},[t._v(" "+t._s(t.showCustomerFilter?"Show Chart":"Filter")+" ")])]),e("line-chart",{directives:[{name:"show",rawName:"v-show",value:!t.showCustomerFilter,expression:"!showCustomerFilter"}],ref:"linechart-customer",attrs:{"chart-title":t._f("uppercase")("penjualan berdasarkan customer"),"chart-label":t.customerReportLabels,"chart-data":t.customerReportValues,"line-color":"#409ce8"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showCustomerFilter,expression:"showCustomerFilter"}],staticStyle:{height:"394px"}},[e("div",{staticClass:"row bg-white p-3 m-2 card"},[e("div",{staticClass:"col-xl-6 d-flex flex-column justify-content-around"},[e("p-form-row",{attrs:{id:"customer-date-start",name:"customer-date-start",label:t.$t("date start"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"customer-date-start-input",label:"Date Start"},model:{value:t.customerFilter.dateStart,callback:function(e){t.$set(t.customerFilter,"dateStart",e)},expression:"customerFilter.dateStart"}})],1)]),e("p-form-row",{attrs:{id:"customer-date-end",name:"customer-date-end",label:t.$t("date end"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"customer-date-end-input",label:"Date End"},model:{value:t.customerFilter.dateEnd,callback:function(e){t.$set(t.customerFilter,"dateEnd",e)},expression:"customerFilter.dateEnd"}})],1)])],1),e("div",{staticClass:"col-xl-6"},[e("p-form-row",{attrs:{id:"item-date-end",name:"item-date-end",label:"Filter by Item","is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("button",{staticClass:"d-block mb-2 btn-link",on:{click:function(e){return t.$refs["first-customer"].open()}}},[t._v(" "+t._s(t.customerFilter.customer.firstCustomer?t.customerFilter.customer.firstCustomer.name:"Select Customer")+" ")]),e("m-customer",{ref:"first-customer",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseCustomer("firstCustomer",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["second-customer"].open()}}},[t._v(" "+t._s(t.customerFilter.customer.secondCustomer?t.customerFilter.customer.secondCustomer.name:"Select Customer")+" ")]),e("m-customer",{ref:"second-customer",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseCustomer("secondCustomer",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["third-customer"].open()}}},[t._v(" "+t._s(t.customerFilter.customer.thirdCustomer?t.customerFilter.customer.thirdCustomer.name:"Select Customer")+" ")]),e("m-customer",{ref:"third-customer",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseCustomer("thirdCustomer",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["fourth-customer"].open()}}},[t._v(" "+t._s(t.customerFilter.customer.fourthCustomer?t.customerFilter.customer.fourthCustomer.name:"Select Customer")+" ")]),e("m-customer",{ref:"fourth-customer",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseCustomer("fourthCustomer",e)}}}),e("button",{staticClass:"d-block mt-2 btn-link",on:{click:function(e){return t.$refs["fifth-customer"].open()}}},[t._v(" "+t._s(t.customerFilter.customer.fifthCustomer?t.customerFilter.customer.fifthCustomer.name:"Select Customer")+" ")]),e("m-customer",{ref:"fifth-customer",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseCustomer("fifthCustomer",e)}}})],1)])],1),e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:t.getReportByCustomer}},[t._v(" Filter ")])])])],1)])]),e("div",{staticClass:"mt-2"},[e("h2",{staticClass:"mb-0"},[t._v(" Dashboard Penjualan Berdasarkan Allocation ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",[t._v("Allocation")]),e("th",[t._v("Total")])]),t._l(Object.keys(t.reportAllocation),(function(o,a){return[e("tr",{key:"allocation-item-".concat(a),attrs:{slot:"p-body"},slot:"p-body"},[e("td",[t._v(t._s(t.reportAllocation[o].name))]),e("td",[t._v(t._s(t._f("numberFormat")(t.reportAllocation[o].total)))])])]}))],2)],1),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.showAllocationFilter=!t.showAllocationFilter}}},[t._v(" "+t._s(t.showAllocationFilter?"Show Chart":"Filter")+" ")])]),e("line-chart",{directives:[{name:"show",rawName:"v-show",value:!t.showAllocationFilter,expression:"!showAllocationFilter"}],ref:"linechart-allocation",attrs:{"chart-title":t._f("uppercase")("penjualan berdasarkan allocation"),"chart-label":t.allocationReportLabels,"chart-data":t.allocationReportValues,"line-color":"#409ce8"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAllocationFilter,expression:"showAllocationFilter"}],staticStyle:{height:"394px"}},[e("div",{staticClass:"row bg-white p-3 m-2 card"},[e("div",{staticClass:"col-xl-6 d-flex flex-column justify-content-around"},[e("p-form-row",{attrs:{id:"alloocation-date-start",name:"alloocation-date-start",label:t.$t("date start"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"alloocation-date-start-input",label:"Date Start"},model:{value:t.allocationFilter.dateStart,callback:function(e){t.$set(t.allocationFilter,"dateStart",e)},expression:"allocationFilter.dateStart"}})],1)]),e("p-form-row",{attrs:{id:"alloocation-date-end",name:"alloocation-date-end",label:t.$t("date end"),"is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("p-date-picker",{attrs:{id:"date",name:"alloocation-date-end-input",label:"Date End"},model:{value:t.allocationFilter.dateEnd,callback:function(e){t.$set(t.allocationFilter,"dateEnd",e)},expression:"allocationFilter.dateEnd"}})],1)])],1),e("div",{staticClass:"col-xl-6"},[e("p-form-row",{attrs:{id:"item-date-end",name:"item-date-end",label:"Filter by Item","is-horizontal":!1}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("button",{staticClass:"d-block mb-2 btn-link",on:{click:function(e){return t.$refs["first-allocation"].open()}}},[t._v(" "+t._s(t.allocationFilter.allocation.firstAllocation?t.allocationFilter.allocation.firstAllocation.name:"Select Allocation")+" ")]),e("m-allocation",{ref:"first-allocation",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseAllocation("firstAllocation",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["second-allocation"].open()}}},[t._v(" "+t._s(t.allocationFilter.allocation.secondAllocation?t.allocationFilter.allocation.secondAllocation.name:"Select Allocation")+" ")]),e("m-allocation",{ref:"second-allocation",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseAllocation("secondAllocation",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["third-allocation"].open()}}},[t._v(" "+t._s(t.allocationFilter.allocation.thirdAllocation?t.allocationFilter.allocation.thirdAllocation.name:"Select Allocation")+" ")]),e("m-allocation",{ref:"third-allocation",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseAllocation("thirdAllocation",e)}}}),e("button",{staticClass:"d-block my-2 btn-link",on:{click:function(e){return t.$refs["fourth-allocation"].open()}}},[t._v(" "+t._s(t.allocationFilter.allocation.fourthAllocation?t.allocationFilter.allocation.fourthAllocation.name:"Select Allocation")+" ")]),e("m-allocation",{ref:"fourth-allocation",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseAllocation("fourthAllocation",e)}}}),e("button",{staticClass:"d-block mt-2 btn-link",on:{click:function(e){return t.$refs["fifth-allocation"].open()}}},[t._v(" "+t._s(t.allocationFilter.allocation.fifthAllocation?t.allocationFilter.allocation.fifthAllocation.name:"Select Allocation")+" ")]),e("m-allocation",{ref:"fifth-allocation",attrs:{"create-button":!1},on:{choosen:function(e){return t.chooseAllocation("fifthAllocation",e)}}})],1)])],1),e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:t.getReportByAllocation}},[t._v(" Filter ")])])])],1)])])],1)},r=[],n=o("c7eb"),i=o("1da1"),s=(o("d81d"),o("99af"),o("a15b"),o("4de4"),o("d3b7"),o("159b"),o("14d9"),o("4e82"),o("feee")),l=o("5ae6"),c=o("208e"),u=o("fa1a"),m=o("bea4"),d=o("8403"),f=o("eed6"),h=o.n(f),p={components:{SalesMenu:m["a"],Breadcrumb:l["a"],BreadcrumbSales:c["a"],PointTable:s["a"],LineChart:d["a"]},data:function(){return{itemSalesInvoices:[],reportItem:{},itemReportLabels:[],itemReportValues:[],showItemFilter:!1,itemFilter:{dateStart:"",dateEnd:"",item:{firstItem:null,secondItem:null,thirdItem:null,fourthItem:null,fifthItem:null}},customerSalesInvoices:[],reportCustomer:{},customerReportLabels:[],customerReportValues:[],showCustomerFilter:!1,customerFilter:{dateStart:"",dateEnd:"",customer:{firstCustomer:null,secondCustomer:null,thirdCustomer:null,fourthCustomer:null,fifthCustomer:null}},allocationSalesInvoices:[],reportAllocation:{},allocationReportLabels:[],allocationReportValues:[],showAllocationFilter:!1,allocationFilter:{dateStart:"",dateEnd:"",allocation:{firstAllocation:null,secondAllocation:null,thirdAllocation:null,fourthAllocation:null,fifthAllocation:null}}}},created:function(){this.getReportByItem(),this.getReportByCustomer(),this.getReportByAllocation()},methods:{getReportByItem:function(){var t=this;return Object(i["a"])(Object(n["a"])().mark((function e(){var o,a,r,i,s,l,c,m;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object.keys(t.itemFilter.item).map((function(e){if(t.itemFilter.item[e])return t.itemFilter.item[e].id})),a="/sales/invoices/report?filter_date_min=".concat(t.itemFilter.dateStart,"&filter_date_max=").concat(t.itemFilter.dateEnd,"&selected_item=").concat(h()(o).join(",")),e.next=4,u["a"].get(a);case 4:r=e.sent,i=r.data,s=i.data,l=i.meta.filter,c=l.min_date,m=l.max_date,t.itemSalesInvoices=s,t.itemFilter.dateStart=c,t.itemFilter.dateEnd=m,t.generateReportByItem();case 14:case"end":return e.stop()}}),e)})))()},generateReportByItem:function(){var t={};this.itemSalesInvoices.forEach((function(e){e.items.forEach((function(e){t["item_".concat(e.itemId)]||(t["item_".concat(e.itemId)]={items:[],name:e.itemName,total:0}),t["item_".concat(e.itemId)].items.push(e)}))}));var e=Object.keys(t).map((function(e){return t[e]}));e.forEach((function(t){var e=0;t.items.forEach((function(t){var o=0;0!==parseFloat(t.discountValue)?o=parseFloat(t.discountValue):0!==parseFloat(t.discountPercent)&&(o=t.price*parseFloat(t.discountPercent)/100),e+=(parseFloat(t.price)-o)*parseFloat(t.quantity)})),t.total=e})),e.sort((function(t,e){return e.total-t.total})),this.reportItem=e,this.itemReportLabels=e.map((function(t){return t.name})),this.itemReportValues=e.map((function(t){return t.total})),this.showItemFilter=!1},getReportByCustomer:function(){var t=this;return Object(i["a"])(Object(n["a"])().mark((function e(){var o,a,r,i,s,l,c,m;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object.keys(t.customerFilter.customer).map((function(e){if(t.customerFilter.customer[e])return t.customerFilter.customer[e].id})),a="/sales/invoices/report?filter_date_min=".concat(t.customerFilter.dateStart,"&filter_date_max=").concat(t.customerFilter.dateEnd,"&selected_customer=").concat(h()(o).join(",")),e.next=4,u["a"].get(a);case 4:r=e.sent,i=r.data,s=i.data,l=i.meta.filter,c=l.min_date,m=l.max_date,t.customerSalesInvoices=s,t.customerFilter.dateStart=c,t.customerFilter.dateEnd=m,t.generateReportByCustomer();case 14:case"end":return e.stop()}}),e)})))()},generateReportByCustomer:function(){var t={};this.customerSalesInvoices.forEach((function(e){var o=e.customer;e.items.forEach((function(e){t["customer_".concat(o.id)]||(t["customer_".concat(o.id)]={items:[],name:o.name,total:0}),t["customer_".concat(o.id)].items.push(e)}))}));var e=Object.keys(t).map((function(e){return t[e]}));e.forEach((function(t){var e=0;t.items.forEach((function(t){var o=0;0!==parseFloat(t.discountValue)?o=parseFloat(t.discountValue):0!==parseFloat(t.discountPercent)&&(o=t.price*parseFloat(t.discountPercent)/100),e+=(parseFloat(t.price)-o)*parseFloat(t.quantity)})),t.total=e})),e.sort((function(t,e){return e.total-t.total})),this.reportCustomer=e,this.customerReportLabels=e.map((function(t){return t.name})),this.customerReportValues=e.map((function(t){return t.total})),this.showCustomerFilter=!1},getReportByAllocation:function(){var t=this;return Object(i["a"])(Object(n["a"])().mark((function e(){var o,a,r,i,s,l,c,m;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object.keys(t.allocationFilter.allocation).map((function(e){if(t.allocationFilter.allocation[e])return t.allocationFilter.allocation[e].id})),a="/sales/invoices/report?filter_date_min=".concat(t.allocationFilter.dateStart,"&filter_date_max=").concat(t.allocationFilter.dateEnd,"&selected_allocation=").concat(h()(o).join(",")),e.next=4,u["a"].get(a);case 4:r=e.sent,i=r.data,s=i.data,l=i.meta.filter,c=l.min_date,m=l.max_date,t.allocationSalesInvoices=s,t.allocationFilter.dateStart=c,t.allocationFilter.dateEnd=m,t.generateReportByAllocation();case 14:case"end":return e.stop()}}),e)})))()},generateReportByAllocation:function(){var t={undefinedAllocation:{items:[],name:"Undefined Allocation",total:0}};this.allocationSalesInvoices.forEach((function(e){e.items.forEach((function(e){var o=e.allocation;o&&o.name&&(t["allocation_".concat(o.id)]||(t["allocation_".concat(o.id)]={items:[],name:o.name,total:0}),t["allocation_".concat(o.id)].items.push(e))}))})),0===t.undefinedAllocation.items.length&&delete t.undefinedAllocation;var e=Object.keys(t).map((function(e){return t[e]}));e.forEach((function(t){var e=0;t.items.forEach((function(t){var o=0;0!==parseFloat(t.discountValue)?o=parseFloat(t.discountValue):0!==parseFloat(t.discountPercent)&&(o=t.price*parseFloat(t.discountPercent)/100),e+=(parseFloat(t.price)-o)*parseFloat(t.quantity)})),t.total=e})),e.sort((function(t,e){return e.total-t.total})),this.reportAllocation=e,this.allocationReportLabels=e.map((function(t){return t.name})),this.allocationReportValues=e.map((function(t){return t.total})),this.showAllocationFilter=!1},chooseItem:function(t,e){e.id?this.itemFilter.item[t]={id:e.id,label:e.label}:this.itemFilter.item[t]=null},chooseCustomer:function(t,e){e.id?this.customerFilter.customer[t]={id:e.id,name:e.label}:this.customerFilter.customer[t]=null},chooseAllocation:function(t,e){e.id?this.allocationFilter.allocation[t]={id:e.id,name:e.label}:this.allocationFilter.allocation[t]=null}}},b=p,v=(o("71cb"),o("2877")),_=Object(v["a"])(b,a,r,!1,null,"61eb4321",null);e["default"]=_.exports},"5e2e":function(t,e,o){var a=o("28c9"),r=o("69d5"),n=o("b4c0"),i=o("fba5"),s=o("67ca");function l(t){var e=-1,o=null==t?0:t.length;this.clear();while(++e<o){var a=t[e];this.set(a[0],a[1])}}l.prototype.clear=a,l.prototype["delete"]=r,l.prototype.get=n,l.prototype.has=i,l.prototype.set=s,t.exports=l},"5edf":function(t,e){function o(t,e,o){var a=-1,r=null==t?0:t.length;while(++a<r)if(o(e,t[a]))return!0;return!1}t.exports=o},6044:function(t,e,o){var a=o("0b07"),r=a(Object,"create");t.exports=r},"63a2":function(t,e,o){},"67ca":function(t,e,o){var a=o("cb5a");function r(t,e){var o=this.__data__,r=a(o,t);return r<0?(++this.size,o.push([t,e])):o[r][1]=e,this}t.exports=r},"69d5":function(t,e,o){var a=o("cb5a"),r=Array.prototype,n=r.splice;function i(t){var e=this.__data__,o=a(e,t);if(o<0)return!1;var r=e.length-1;return o==r?e.pop():n.call(e,o,1),--this.size,!0}t.exports=i},"71cb":function(t,e,o){"use strict";o("63a2")},"750a":function(t,e,o){var a=o("c869"),r=o("bcdf"),n=o("ac41"),i=1/0,s=a&&1/n(new a([,-0]))[1]==i?function(t){return new a(t)}:r;t.exports=s},"79bc":function(t,e,o){var a=o("0b07"),r=o("2b3e"),n=a(r,"Map");t.exports=n},"7a48":function(t,e,o){var a=o("6044"),r=Object.prototype,n=r.hasOwnProperty;function i(t){var e=this.__data__;return a?void 0!==e[t]:n.call(e,t)}t.exports=i},"7b83":function(t,e,o){var a=o("7c64"),r=o("93ed"),n=o("2478"),i=o("a524"),s=o("1fc8");function l(t){var e=-1,o=null==t?0:t.length;this.clear();while(++e<o){var a=t[e];this.set(a[0],a[1])}}l.prototype.clear=a,l.prototype["delete"]=r,l.prototype.get=n,l.prototype.has=i,l.prototype.set=s,t.exports=l},"7c64":function(t,e,o){var a=o("e24b"),r=o("5e2e"),n=o("79bc");function i(){this.size=0,this.__data__={hash:new a,map:new(n||r),string:new a}}t.exports=i},"7ed2":function(t,e){var o="__lodash_hash_undefined__";function a(t){return this.__data__.set(t,o),this}t.exports=a},"8db33":function(t,e,o){var a=o("47f5");function r(t,e){var o=null==t?0:t.length;return!!o&&a(t,e,0)>-1}t.exports=r},"93ed":function(t,e,o){var a=o("4245");function r(t){var e=a(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=r},9638:function(t,e){function o(t,e){return t===e||t!==t&&e!==e}t.exports=o},a524:function(t,e,o){var a=o("4245");function r(t){return a(this,t).has(t)}t.exports=r},ac41:function(t,e){function o(t){var e=-1,o=Array(t.size);return t.forEach((function(t){o[++e]=t})),o}t.exports=o},b4c0:function(t,e,o){var a=o("cb5a");function r(t){var e=this.__data__,o=a(e,t);return o<0?void 0:e[o][1]}t.exports=r},bbc0:function(t,e,o){var a=o("6044"),r="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function s(t){var e=this.__data__;if(a){var o=e[t];return o===r?void 0:o}return i.call(e,t)?e[t]:void 0}t.exports=s},bcdf:function(t,e){function o(){}t.exports=o},c584:function(t,e){function o(t,e){return t.has(e)}t.exports=o},c869:function(t,e,o){var a=o("0b07"),r=o("2b3e"),n=a(r,"Set");t.exports=n},cb5a:function(t,e,o){var a=o("9638");function r(t,e){var o=t.length;while(o--)if(a(t[o][0],e))return o;return-1}t.exports=r},d612:function(t,e,o){var a=o("7b83"),r=o("7ed2"),n=o("dc0f");function i(t){var e=-1,o=null==t?0:t.length;this.__data__=new a;while(++e<o)this.add(t[e])}i.prototype.add=i.prototype.push=r,i.prototype.has=n,t.exports=i},d9a8:function(t,e){function o(t){return t!==t}t.exports=o},da03:function(t,e,o){var a=o("2b3e"),r=a["__core-js_shared__"];t.exports=r},dc0f:function(t,e){function o(t){return this.__data__.has(t)}t.exports=o},dc57:function(t,e){var o=Function.prototype,a=o.toString;function r(t){if(null!=t){try{return a.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=r},e24b:function(t,e,o){var a=o("49f4"),r=o("1efc"),n=o("bbc0"),i=o("7a48"),s=o("25241");function l(t){var e=-1,o=null==t?0:t.length;this.clear();while(++e<o){var a=t[e];this.set(a[0],a[1])}}l.prototype.clear=a,l.prototype["delete"]=r,l.prototype.get=n,l.prototype.has=i,l.prototype.set=s,t.exports=l},eed6:function(t,e,o){var a=o("2c66");function r(t){return t&&t.length?a(t):[]}t.exports=r},fba5:function(t,e,o){var a=o("cb5a");function r(t){return a(this.__data__,t)>-1}t.exports=r}}]);
//# sourceMappingURL=chunk-647c298a.005a1b31.js.map
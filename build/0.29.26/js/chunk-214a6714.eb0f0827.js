(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214a6714"],{"26e9":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/plugin/play-book"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("play book")))+" ")])},i=[],n=e("2877"),r={},o=Object(n["a"])(r,a,i,!1,null,null,null);s["a"]=o.exports},"3fa2":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"nav nav-tabs nav-tabs-alt mb-10",attrs:{"data-toggle":"tabs",role:"tablist"}},[t._t("default"),t.$permission.has("create play book procedure")?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/procedure","active-class":"active"}},[s("span",[t._v(t._s(t._f("uppercase")(t.$t("procedure"))))])])],1):t._e(),t.$permission.has("create play book instruction")?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/instruction","active-class":"active"}},[s("span",[t._v(t._s(t._f("uppercase")(t.$t("instruction"))))])])],1):t._e(),t._t("right")],2)},i=[],n=e("2877"),r={},o=Object(n["a"])(r,a,i,!1,null,null,null);s["a"]=o.exports},5736:function(t,s,e){"use strict";e("89af")},"89af":function(t,s,e){},b95d:function(t,s,e){"use strict";e.r(s);var a=e("ade3"),i=(e("99af"),e("fb6a"),e("b0c0"),function(){var t=this,s=t._self._c;return s("div",[s("breadcrumb",[s("breadcrumb-plugin"),s("breadcrumb-play-book"),s("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Approval")))]),s("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/plugin/play-book/approval/instruction"}},[t._v(" "+t._s(t._f("uppercase")("Instruction"))+" ")]),s("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Sent")))])],1),s("tab-menu"),s("div",{staticClass:"row"},[s("p-block",[s("div",{staticClass:"input-group block mb-5"},[s("router-link",{staticClass:"btn btn-outline-primary mr-3",attrs:{to:"/plugin/play-book/approval/instruction"}},[s("i",{staticClass:"fa fa-arrow-left mr-2"}),t._v(" List ")]),t.selectedIds.length||t.selectedStepIds.length?s("button",{staticClass:"btn btn-primary mr-3",on:{click:function(s){return t.$refs.modelSendInstructionRequest.open()}}},[t._v(" Sent "+t._s(t.selectedIds.length)+" "+t._s("Request".concat(t.selectedIds.length>1?"s":""))+" "),s("i",{staticClass:"fa fa-paper-plane"})]):t._e(),s("p-form-input",{ref:"searchText",staticClass:"btn-block",attrs:{id:"search-text",name:"search-text",placeholder:"Search",value:t.searchText},on:{input:t.filterSearch}})],1),s("hr"),s("p-block-inner",{attrs:{"is-loading":t.isLoading}},[s("point-table",[s("tr",{attrs:{slot:"p-head"},slot:"p-head"},[s("th",[t._v("#")]),s("th",[t._v("Name")]),s("th",[t._v("Action")]),s("th",[t._v("Status")]),s("th",{staticClass:"text-center"},[t._v(" Edit ")])]),t._l(t.instructions,(function(e){return[s("tr",{key:e.id,attrs:{slot:"p-body"},slot:"p-body"},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ids[e.id],expression:"form.ids[instruction.id]"}],staticStyle:{"min-width":"auto"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.ids[e.id])?t._i(t.form.ids[e.id],null)>-1:t.form.ids[e.id]},on:{change:function(s){var a=t.form.ids[e.id],i=s.target,n=!!i.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&t.$set(t.form.ids,e.id,a.concat([r])):o>-1&&t.$set(t.form.ids,e.id,a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.form.ids,e.id,n)}}})]),s("td",[t._v(" "+t._s(e.number)+" - "+t._s(e.name)+" ")]),s("td",[t._v(t._s(t._f("uppercase")(e.approval_action)))]),s("td",[s("span",{staticClass:"badge",class:Object(a["a"])({},e.approved_at?"badge-success":"badge-secondary",!0)},[t._v(" "+t._s(e.approved_at?"APPROVED":"PENDING")+" ")])]),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-sm btn-light",attrs:{disabled:e.approved_at},on:{click:function(s){t.instructionToEdit=e,t.$refs.modalEditInstruction.open()}}},[s("i",{staticClass:"fa fa-edit"})])])]),t._l(e.steps,(function(e){return s("tr",{key:e.id,attrs:{slot:"p-body"},slot:"p-body"},[s("td"),s("td",[s("i",{staticClass:"fa fa-long-arrow-right mr-2"}),t._v(" "+t._s(e.name)+" ")]),s("td",[t._v(" "+t._s(t._f("uppercase")(e.approval_action))+" ")]),s("td",[s("span",{staticClass:"badge",class:Object(a["a"])({},e.approved_at?"badge-success":"badge-secondary",!0)},[t._v(" "+t._s(e.approved_at?"APPROVED":"PENDING")+" ")])]),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-sm btn-light",attrs:{disabled:e.approved_at},on:{click:function(s){t.stepToEdit=e,t.$refs.modalEditStep.open()}}},[s("i",{staticClass:"fa fa-edit"})])])])}))]})),t.instructions.length<1?s("tr",{staticClass:"text-center",attrs:{slot:"p-body"},slot:"p-body"},[s("td",{staticClass:"my-2 py-5",attrs:{colspan:"6"}},[t._v(" No data ")])]):t._e()],2)],1),s("p-pagination",{attrs:{"current-page":t.page,"last-page":t.lastPage},on:{updatePage:t.updatePage}})],1)],1),s("m-status",{ref:"status",on:{choosen:t.onChoosenStatus}}),s("m-send-instruction-request",{ref:"modelSendInstructionRequest",attrs:{ids:t.selectedIds,"step-ids":t.selectedStepIds},on:{added:t.getInstructions}}),s("m-edit-instruction",{ref:"modalEditInstruction",attrs:{instruction:t.instructionToEdit},on:{added:t.getInstructions}}),s("m-edit-instruction-step",{ref:"modalEditStep",attrs:{step:t.stepToEdit},on:{added:t.getInstructions}})],1)}),n=[],r=e("c7eb"),o=e("1da1"),c=e("5530"),u=(e("ac1f"),e("841c"),e("14d9"),e("d3b7"),e("159b"),e("7db0"),e("5ae6")),d=e("bc27"),l=e("26e9"),p=e("3fa2"),b=e("b047"),f=e.n(b),h=e("feee"),m=e("2f62"),v={components:{Breadcrumb:u["a"],BreadcrumbPlugin:d["a"],BreadcrumbPlayBook:l["a"],PointTable:h["a"],TabMenu:p["a"]},data:function(){return{isLoading:!0,searchText:this.$route.query.search,page:1*this.$route.query.page||1,limit:10,lastPage:1,isAdvanceFilter:!1,statusId:this.$route.query.statusId,statusLabel:null,form:{ids:{},stepIds:{}},instructionToEdit:null,stepToEdit:null}},computed:Object(c["a"])(Object(c["a"])({},Object(m["c"])("pluginPlayBookInstructionApproval",["instructions","pagination"])),{},{selectedIds:function(){var t=[];for(var s in this.form.ids)this.form.ids[s]&&t.push(s);return t},selectedStepIds:function(){var t=[];for(var s in this.form.stepIds)this.form.stepIds[s]&&t.push(s);return t}}),watch:{selectedIds:function(){var t=this;this.form.stepIds={},this.selectedIds.forEach((function(s){var e=t.instructions.find((function(t){return t.id===parseInt(s)}));e.steps.forEach((function(s){t.form.stepIds["".concat(s.id)]=!0}))}))}},mounted:function(){var t=this;this.getInstructions(),this.$nextTick((function(){t.$refs.searchText.setFocus()}))},updated:function(){this.lastPage=this.pagination.last_page},methods:Object(c["a"])(Object(c["a"])({},Object(m["b"])("pluginPlayBookInstructionApproval",["get"])),{},{onChoosenStatus:function(t){this.statusId=t.id,this.statusLabel=t.label,this.$router.push({query:{search:this.searchText,statusId:this.statusId,groupId:this.groupId,pricingGroupId:this.pricingGroupId}}),this.getInstructions()},filterSearch:f()((function(t){this.$router.push({query:{search:t,statusId:this.statusId}}),this.searchText=t,this.page=1,this.getInstructions()}),300),getInstructions:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function s(){return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isLoading=!0,t.form.ids={},t.form.stepIds={},s.next=6,t.get({search:t.searchText,page:t.page,limit:t.limit,status:t.status,want:"send"});case 6:s.next=10;break;case 8:s.prev=8,s.t0=s["catch"](0);case 10:return s.prev=10,t.isLoading=!1,s.finish(10);case 13:case"end":return s.stop()}}),s,null,[[0,8,10,13]])})))()},updatePage:function(t){this.page=t,this.getInstructions()}})},g=v,_=(e("5736"),e("2877")),I=Object(_["a"])(g,i,n,!1,null,null,null);s["default"]=I.exports}}]);
//# sourceMappingURL=chunk-214a6714.eb0f0827.js.map
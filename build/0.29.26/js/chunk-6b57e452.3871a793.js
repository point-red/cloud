(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b57e452"],{"26e9":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/plugin/play-book"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("play book")))+" ")])},r=[],n=a("2877"),i={},o=Object(n["a"])(i,s,r,!1,null,null,null);e["a"]=o.exports},"2a0a":function(t,e,a){},"33e0":function(t,e,a){"use strict";a.r(e);a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",[e("breadcrumb",[e("breadcrumb-plugin"),e("breadcrumb-play-book"),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Approval")))]),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Procedure")))])],1),e("tab-menu"),e("div",{staticClass:"row"},[e("p-block",[e("div",{staticClass:"input-group block mb-5"},[t.$permission.has("create play book procedure")?e("router-link",{staticClass:"btn btn-outline-primary mr-3",attrs:{to:"/plugin/play-book/approval/procedure/send"}},[t._v(" Sent Request "),e("i",{staticClass:"fa fa-paper-plane"})]):t._e(),e("p-form-input",{ref:"searchText",staticClass:"btn-block",attrs:{id:"search-text",name:"search-text",placeholder:"Search",value:t.searchText},on:{input:t.filterSearch}})],1),e("hr"),e("p-block-inner",{attrs:{"is-loading":t.isLoading}},[t.$permission.has("approve play book procedure")?e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",{attrs:{width:"50px"}},[t._v(" # ")]),e("th",[t._v("Code")]),e("th",[t._v("To")]),e("th",[t._v("Action")]),e("th",[t._v("Note")]),e("th",[t._v("Status")])]),t._l(t.procedures,(function(a,s){return e("tr",{key:a.id,attrs:{slot:"p-body"},slot:"p-body"},[e("th",[t._v(t._s(++s+(t.page-1)*t.limit))]),e("td",[e("div",[e("router-link",{attrs:{to:"/plugin/play-book/procedure/".concat(a.id)}},[t._v(" "+t._s(a.code)+" - "+t._s(a.name)+" ")])],1),e("span",{staticClass:"text-muted"},[t._v(" "+t._s(new Date(a.approval_request_at).toLocaleString())+" ")])]),e("td",[t._v(t._s(t._f("uppercase")(a.approver?a.approver.name:"-")))]),e("td",[t._v(t._s(t._f("uppercase")(a.approval_action)))]),e("td",[t._v(t._s(a.approval_note||"-"))]),e("td",[e("span",{staticClass:"badge",class:t.getClasses(a)},[t._v(" "+t._s(t._f("uppercase")(t.getStatus(a)))+" ")])])])})),t.procedures.length<1?e("tr",{staticClass:"text-center",attrs:{slot:"p-body"},slot:"p-body"},[e("td",{staticClass:"my-2 py-5",attrs:{colspan:"6"}},[t._v(" No data ")])]):t._e()],2):e("div",{staticClass:"alert alert-danger"},[e("span",[t._v("You don't have permission to see this page")])])],1),e("p-pagination",{attrs:{"current-page":t.page,"last-page":t.lastPage},on:{updatePage:t.updatePage}})],1)],1),e("m-status",{ref:"status",on:{choosen:t.onChoosenStatus}})],1)},r=[],n=a("c7eb"),i=a("1da1"),o=a("ade3"),c=a("5530"),u=(a("ac1f"),a("841c"),a("14d9"),a("5ae6")),p=a("bc27"),l=a("26e9"),d=a("3fa2"),b=a("b047"),h=a.n(b),v=a("feee"),_=a("2f62"),g={components:{Breadcrumb:u["a"],BreadcrumbPlugin:p["a"],BreadcrumbPlayBook:l["a"],PointTable:v["a"],TabMenu:d["a"]},data:function(){return{isLoading:!0,searchText:this.$route.query.search,page:1*this.$route.query.page||1,limit:10,lastPage:1,isAdvanceFilter:!1,statusId:this.$route.query.statusId,statusLabel:null}},computed:Object(c["a"])({},Object(_["c"])("pluginPlayBookProcedureApproval",["procedures","pagination"])),mounted:function(){var t=this;this.getProcedures(),this.$nextTick((function(){t.$refs.searchText.setFocus()}))},updated:function(){this.lastPage=this.pagination.last_page},methods:Object(c["a"])(Object(c["a"])({},Object(_["b"])("pluginPlayBookProcedureApproval",["get"])),{},{getStatus:function(t){return t.approved_at?"approved":t.declined_at?"declined":"pending"},getClasses:function(t){var e=t.approved_at?"btn-success":t.declined_at?"btn-danger":"btn-secondary";return Object(o["a"])({},e,!0)},onChoosenStatus:function(t){this.statusId=t.id,this.statusLabel=t.label,this.$router.push({query:{search:this.searchText,statusId:this.statusId,groupId:this.groupId,pricingGroupId:this.pricingGroupId}}),this.getProcedures()},filterSearch:h()((function(t){this.$router.push({query:{search:t,statusId:this.statusId}}),this.searchText=t,this.page=1,this.getProcedures()}),300),getProcedures:function(){var t=this;return Object(i["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,t.get({search:t.searchText,page:t.page,limit:t.limit,status:t.status});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:return e.prev=8,t.isLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,6,8,11]])})))()},updatePage:function(t){this.page=t,this.getProcedures()}})},f=g,m=(a("c02f"),a("2877")),k=Object(m["a"])(f,s,r,!1,null,null,null);e["default"]=k.exports},"3fa2":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"nav nav-tabs nav-tabs-alt mb-10",attrs:{"data-toggle":"tabs",role:"tablist"}},[t._t("default"),t.$permission.has("create play book procedure")?e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/procedure","active-class":"active"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("procedure"))))])])],1):t._e(),t.$permission.has("create play book instruction")?e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/instruction","active-class":"active"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("instruction"))))])])],1):t._e(),t._t("right")],2)},r=[],n=a("2877"),i={},o=Object(n["a"])(i,s,r,!1,null,null,null);e["a"]=o.exports},c02f:function(t,e,a){"use strict";a("2a0a")}}]);
//# sourceMappingURL=chunk-6b57e452.3871a793.js.map
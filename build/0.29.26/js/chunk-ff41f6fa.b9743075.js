(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff41f6fa"],{"26e9":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/plugin/play-book"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("play book")))+" ")])},n=[],r=e("2877"),o={},i=Object(r["a"])(o,a,n,!1,null,null,null);s["a"]=i.exports},"3fa2":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"nav nav-tabs nav-tabs-alt mb-10",attrs:{"data-toggle":"tabs",role:"tablist"}},[t._t("default"),t.$permission.has("create play book procedure")?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/procedure","active-class":"active"}},[s("span",[t._v(t._s(t._f("uppercase")(t.$t("procedure"))))])])],1):t._e(),t.$permission.has("create play book instruction")?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/plugin/play-book/approval/instruction","active-class":"active"}},[s("span",[t._v(t._s(t._f("uppercase")(t.$t("instruction"))))])])],1):t._e(),t._t("right")],2)},n=[],r=e("2877"),o={},i=Object(r["a"])(o,a,n,!1,null,null,null);s["a"]=i.exports},"43c1":function(t,s,e){"use strict";e.r(s);e("b0c0");var a=function(){var t=this,s=t._self._c;return s("div",[s("breadcrumb",[s("breadcrumb-plugin"),s("breadcrumb-play-book"),s("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Approval")))]),s("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")("Instruction")))])],1),s("tab-menu"),s("div",{staticClass:"row mb-5"},[s("p-block",[s("div",{staticClass:"input-group block mb-5"},[t.$permission.has("create play book instruction")?s("router-link",{staticClass:"btn btn-outline-primary mr-3",attrs:{to:"/plugin/play-book/approval/instruction/send"}},[t._v(" Sent Request "),s("i",{staticClass:"fa fa-paper-plane"})]):t._e(),s("p-form-input",{ref:"searchText",staticClass:"btn-block",attrs:{id:"search-text",name:"search-text",placeholder:"Search",value:t.searchText},on:{input:t.filterSearch}})],1),s("hr"),s("p-block-inner",{attrs:{"is-loading":t.isLoading}},[t.$permission.has("approve play book instruction")?s("point-table",[s("tr",{attrs:{slot:"p-head"},slot:"p-head"},[s("th",{attrs:{width:"50px"}},[t._v(" # ")]),s("th",[t._v("Number")]),s("th",[t._v("Procedure")]),s("th",[t._v("To")]),s("th",[t._v("Action")]),s("th",[t._v("Note")]),s("th",[t._v("Status")])]),t._l(t.instructions,(function(e,a){return[s("tr",{key:e.id,attrs:{slot:"p-body"},slot:"p-body"},[s("th",[t._v(t._s(++a+(t.page-1)*t.limit))]),s("td",[s("div",[e.approved_at||t.authUser.id!==e.approval_request_to?s("span",[t._v(" "+t._s(e.number)+" - "+t._s(e.name)+" ")]):s("a",{attrs:{href:"#".concat(e.id)},on:{click:function(s){return s.stopPropagation(),t.showInstructionModal(e.id)}}},[t._v(" "+t._s(e.number)+" - "+t._s(e.name)+" ")])]),s("span",{staticClass:"text-muted"},[t._v(" "+t._s(new Date(e.approval_request_at).toLocaleString())+" ")])]),s("td",[s("router-link",{attrs:{to:"/plugin/play-book/procedure/".concat(e.procedure.id)}},[t._v(" "+t._s(e.procedure.code)+" - "+t._s(e.procedure.name)+" ")])],1),s("td",[t._v(t._s(t._f("uppercase")(e.approver.name)))]),s("td",[t._v(t._s(t._f("uppercase")(e.approval_action)))]),s("td",[t._v(t._s(e.approval_note||"-"))]),s("td",[s("span",{staticClass:"badge",class:t.getClasses(e)},[t._v(" "+t._s(t._f("uppercase")(t.getStatus(e)))+" ")])])]),t._l(e.steps,(function(a){return s("tr",{key:a.id,attrs:{slot:"p-body"},slot:"p-body"},[s("td"),s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"d-flex align-items-center"},[s("i",{staticClass:"fa fa-long-arrow-right mr-3"}),s("div",[s("div",[a.approved_at?s("span",[t._v(t._s(a.name))]):s("a",{attrs:{href:"#step-".concat(a.id)},on:{click:function(s){return s.stopPropagation(),t.showInstructionStepModal(a)}}},[t._v(" "+t._s(a.name)+" ")])]),s("span",{staticClass:"text-muted"},[t._v(" "+t._s(new Date(e.approval_request_at).toLocaleString())+" ")])])])]),s("td",[t._v(t._s(t._f("uppercase")(e.approver.name)))]),s("td",[t._v(" "+t._s(t._f("uppercase")(a.approval_action))+" ")]),s("td",[t._v(" "+t._s(a.approval_note||"-")+" ")]),s("td",[s("span",{staticClass:"badge",class:t.getClasses(a)},[t._v(" "+t._s(t._f("uppercase")(t.getStatus(a)))+" ")])])])}))]})),t.instructions.length<1?s("tr",{staticClass:"text-center",attrs:{slot:"p-body"},slot:"p-body"},[s("td",{staticClass:"my-2 py-5",attrs:{colspan:"6"}},[t._v(" No data ")])]):t._e()],2):s("div",{staticClass:"alert alert-danger"},[s("span",[t._v("You don't have permission to see this page")])])],1),s("p-pagination",{attrs:{"current-page":t.page,"last-page":t.lastPage},on:{updatePage:t.updatePage}})],1)],1),s("m-status",{ref:"status",on:{choosen:t.onChoosenStatus}}),s("m-show-instruction",{ref:"modalShowInstruction",attrs:{"instruction-id":t.selectedInstructionId},on:{added:t.getInstructions}}),s("m-show-instruction-step",{ref:"modalShowInstructionStep",attrs:{step:t.selectedStep},on:{added:t.getInstructions}})],1)},n=[],r=e("ade3"),o=e("c7eb"),i=e("1da1"),c=e("5530"),u=(e("ac1f"),e("841c"),e("d3b7"),e("159b"),e("7db0"),e("14d9"),e("5ae6")),p=e("bc27"),l=e("26e9"),d=e("3fa2"),h=e("b047"),_=e.n(h),v=e("feee"),b=e("2f62"),f={components:{Breadcrumb:u["a"],BreadcrumbPlugin:p["a"],BreadcrumbPlayBook:l["a"],PointTable:v["a"],TabMenu:d["a"]},data:function(){return{isLoading:!0,searchText:this.$route.query.search,page:1*this.$route.query.page||1,limit:10,lastPage:1,isAdvanceFilter:!1,statusId:this.$route.query.statusId,statusLabel:null,selectedInstructionId:null,selectedStep:null}},computed:Object(c["a"])(Object(c["a"])({},Object(b["c"])("auth",["authUser"])),Object(b["c"])("pluginPlayBookInstructionApproval",["instructions","pagination"])),mounted:function(){var t=this;this.getInstructions().then((function(){if(t.$route.query.step_id&&t.$route.query.action){var s=null;t.instructions.forEach((function(e){s=e.steps.find((function(s){return s.id===parseInt(t.$route.query.step_id)}))})),t.showInstructionStepModal(s)}t.$route.query.id&&t.$route.query.action&&t.showInstructionModal(t.$route.query.id)})),this.$nextTick((function(){t.$refs.searchText.setFocus()}))},updated:function(){this.lastPage=this.pagination.last_page},methods:Object(c["a"])(Object(c["a"])({},Object(b["b"])("pluginPlayBookInstructionApproval",["get"])),{},{onChoosenStatus:function(t){this.statusId=t.id,this.statusLabel=t.label,this.$router.push({query:{search:this.searchText,statusId:this.statusId,groupId:this.groupId,pricingGroupId:this.pricingGroupId}}),this.getInstructions()},filterSearch:_()((function(t){this.$router.push({query:{search:t,statusId:this.statusId}}),this.searchText=t,this.page=1,this.getInstructions()}),300),getInstructions:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isLoading=!0,s.next=4,t.get({search:t.searchText,page:t.page,limit:t.limit,status:t.status});case 4:s.next=8;break;case 6:s.prev=6,s.t0=s["catch"](0);case 8:return s.prev=8,t.isLoading=!1,s.finish(8);case 11:case"end":return s.stop()}}),s,null,[[0,6,8,11]])})))()},getStatus:function(t){return t.approved_at?"approved":t.declined_at?"declined":"pending"},getClasses:function(t){var s=t.approved_at?"btn-success":t.declined_at?"btn-danger":"btn-secondary";return Object(r["a"])({},s,!0)},updatePage:function(t){this.page=t,this.getInstructions()},showInstructionModal:function(t){this.selectedInstructionId=t,this.$refs.modalShowInstruction.open()},showInstructionStepModal:function(t){this.selectedStep=t,this.$refs.modalShowInstructionStep.open()}})},g=f,m=(e("50f0"),e("2877")),I=Object(m["a"])(g,a,n,!1,null,null,null);s["default"]=I.exports},"50f0":function(t,s,e){"use strict";e("ac5a")},ac5a:function(t,s,e){}}]);
//# sourceMappingURL=chunk-ff41f6fa.b9743075.js.map
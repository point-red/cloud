{"version":3,"sources":["webpack:///./src/views/plugin/play-book/Breadcrumb.vue","webpack:///./src/views/plugin/play-book/Breadcrumb.vue?5ddc","webpack:///./src/views/plugin/play-book/approval/components/TabMenu.vue","webpack:///./src/views/plugin/play-book/approval/components/TabMenu.vue?7e43","webpack:///./src/views/plugin/play-book/approval/InstructionSend.vue?5d69","webpack:///./src/views/plugin/play-book/approval/InstructionSend.vue","webpack:///src/views/plugin/play-book/approval/InstructionSend.vue","webpack:///./src/views/plugin/play-book/approval/InstructionSend.vue?7603","webpack:///./src/views/plugin/play-book/approval/InstructionSend.vue?4ecc"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","_s","_f","$t","staticRenderFns","script","component","_t","$permission","has","_e","selectedIds","length","selectedStepIds","on","$event","$refs","modelSendInstructionRequest","open","ref","searchText","filterSearch","isLoading","slot","_l","instructions","instruction","key","id","directives","name","rawName","value","form","ids","expression","staticStyle","domProps","Array","isArray","_i","$$a","$$el","target","$$c","checked","$$v","$$i","$set","concat","slice","number","approval_action","class","approved_at","instructionToEdit","modalEditInstruction","steps","step","stepToEdit","modalEditStep","page","lastPage","updatePage","onChoosenStatus","getInstructions","components","Breadcrumb","BreadcrumbPlugin","BreadcrumbPlayBook","PointTable","TabMenu","data","limit","isAdvanceFilter","statusId","statusLabel","stepIds","computed","mapGetters","watch","mounted","updated","methods","mapActions","query","search","groupId","pricingGroupId","status","want"],"mappings":"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","file":"js/chunk-214a6714.eb0f0827.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('router-link',{staticClass:\"breadcrumb-item\",attrs:{\"to\":\"/plugin/play-book\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(_vm.$t('play book')))+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Breadcrumb.vue?vue&type=template&id=dec76a66&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"nav nav-tabs nav-tabs-alt mb-10\",attrs:{\"data-toggle\":\"tabs\",\"role\":\"tablist\"}},[_vm._t(\"default\"),(_vm.$permission.has('create play book procedure'))?_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/plugin/play-book/approval/procedure\",\"active-class\":\"active\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"uppercase\")(_vm.$t('procedure'))))])])],1):_vm._e(),(_vm.$permission.has('create play book instruction'))?_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/plugin/play-book/approval/instruction\",\"active-class\":\"active\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"uppercase\")(_vm.$t('instruction'))))])])],1):_vm._e(),_vm._t(\"right\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./TabMenu.vue?vue&type=template&id=3a66df3c&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstructionSend.vue?vue&type=style&index=0&id=4ae26681&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('breadcrumb',[_c('breadcrumb-plugin'),_c('breadcrumb-play-book'),_c('span',{staticClass:\"breadcrumb-item active\"},[_vm._v(_vm._s(_vm._f(\"uppercase\")('Approval')))]),_c('router-link',{staticClass:\"breadcrumb-item\",attrs:{\"to\":\"/plugin/play-book/approval/instruction\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")('Instruction'))+\" \")]),_c('span',{staticClass:\"breadcrumb-item active\"},[_vm._v(_vm._s(_vm._f(\"uppercase\")('Sent')))])],1),_c('tab-menu'),_c('div',{staticClass:\"row\"},[_c('p-block',[_c('div',{staticClass:\"input-group block mb-5\"},[_c('router-link',{staticClass:\"btn btn-outline-primary mr-3\",attrs:{\"to\":\"/plugin/play-book/approval/instruction\"}},[_c('i',{staticClass:\"fa fa-arrow-left mr-2\"}),_vm._v(\" List \")]),(!!_vm.selectedIds.length || !!_vm.selectedStepIds.length)?_c('button',{staticClass:\"btn btn-primary mr-3\",on:{\"click\":function($event){return _vm.$refs.modelSendInstructionRequest.open()}}},[_vm._v(\" Sent \"+_vm._s((_vm.selectedIds.length))+\" \"+_vm._s(`Request${_vm.selectedIds.length > 1 ? 's' : ''}`)+\" \"),_c('i',{staticClass:\"fa fa-paper-plane\"})]):_vm._e(),_c('p-form-input',{ref:\"searchText\",staticClass:\"btn-block\",attrs:{\"id\":\"search-text\",\"name\":\"search-text\",\"placeholder\":\"Search\",\"value\":_vm.searchText},on:{\"input\":_vm.filterSearch}})],1),_c('hr'),_c('p-block-inner',{attrs:{\"is-loading\":_vm.isLoading}},[_c('point-table',[_c('tr',{attrs:{\"slot\":\"p-head\"},slot:\"p-head\"},[_c('th',[_vm._v(\"#\")]),_c('th',[_vm._v(\"Name\")]),_c('th',[_vm._v(\"Action\")]),_c('th',[_vm._v(\"Status\")]),_c('th',{staticClass:\"text-center\"},[_vm._v(\" Edit \")])]),_vm._l((_vm.instructions),function(instruction){return [_c('tr',{key:instruction.id,attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.ids[instruction.id]),expression:\"form.ids[instruction.id]\"}],staticStyle:{\"min-width\":\"auto\"},attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.form.ids[instruction.id])?_vm._i(_vm.form.ids[instruction.id],null)>-1:(_vm.form.ids[instruction.id])},on:{\"change\":function($event){var $$a=_vm.form.ids[instruction.id],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.form.ids, instruction.id, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.form.ids, instruction.id, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.form.ids, instruction.id, $$c)}}}})]),_c('td',[_vm._v(\" \"+_vm._s(instruction.number)+\" - \"+_vm._s(instruction.name)+\" \")]),_c('td',[_vm._v(_vm._s(_vm._f(\"uppercase\")(instruction.approval_action)))]),_c('td',[_c('span',{staticClass:\"badge\",class:{ [instruction.approved_at ? 'badge-success' : 'badge-secondary']: true }},[_vm._v(\" \"+_vm._s(instruction.approved_at ? 'APPROVED' : 'PENDING')+\" \")])]),_c('td',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn btn-sm btn-light\",attrs:{\"disabled\":instruction.approved_at},on:{\"click\":function($event){_vm.instructionToEdit = instruction; _vm.$refs.modalEditInstruction.open()}}},[_c('i',{staticClass:\"fa fa-edit\"})])])]),_vm._l((instruction.steps),function(step){return _c('tr',{key:step.id,attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('td'),_c('td',[_c('i',{staticClass:\"fa fa-long-arrow-right mr-2\"}),_vm._v(\" \"+_vm._s(step.name)+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(step.approval_action))+\" \")]),_c('td',[_c('span',{staticClass:\"badge\",class:{ [step.approved_at ? 'badge-success' : 'badge-secondary']: true }},[_vm._v(\" \"+_vm._s(step.approved_at ? 'APPROVED' : 'PENDING')+\" \")])]),_c('td',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn btn-sm btn-light\",attrs:{\"disabled\":step.approved_at},on:{\"click\":function($event){_vm.stepToEdit = step; _vm.$refs.modalEditStep.open()}}},[_c('i',{staticClass:\"fa fa-edit\"})])])])})]}),(_vm.instructions.length < 1)?_c('tr',{staticClass:\"text-center\",attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('td',{staticClass:\"my-2 py-5\",attrs:{\"colspan\":\"6\"}},[_vm._v(\" No data \")])]):_vm._e()],2)],1),_c('p-pagination',{attrs:{\"current-page\":_vm.page,\"last-page\":_vm.lastPage},on:{\"updatePage\":_vm.updatePage}})],1)],1),_c('m-status',{ref:\"status\",on:{\"choosen\":_vm.onChoosenStatus}}),_c('m-send-instruction-request',{ref:\"modelSendInstructionRequest\",attrs:{\"ids\":_vm.selectedIds,\"step-ids\":_vm.selectedStepIds},on:{\"added\":_vm.getInstructions}}),_c('m-edit-instruction',{ref:\"modalEditInstruction\",attrs:{\"instruction\":_vm.instructionToEdit},on:{\"added\":_vm.getInstructions}}),_c('m-edit-instruction-step',{ref:\"modalEditStep\",attrs:{\"step\":_vm.stepToEdit},on:{\"added\":_vm.getInstructions}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <breadcrumb>\r\n      <breadcrumb-plugin />\r\n      <breadcrumb-play-book />\r\n      <span class=\"breadcrumb-item active\">{{ 'Approval' | uppercase }}</span>\r\n      <router-link\r\n        to=\"/plugin/play-book/approval/instruction\"\r\n        class=\"breadcrumb-item\"\r\n      >\r\n        {{ 'Instruction' | uppercase }}\r\n      </router-link>\r\n      <span class=\"breadcrumb-item active\">{{ 'Sent' | uppercase }}</span>\r\n    </breadcrumb>\r\n\r\n    <tab-menu />\r\n\r\n    <div class=\"row\">\r\n      <p-block>\r\n        <div class=\"input-group block mb-5\">\r\n          <router-link\r\n            class=\"btn btn-outline-primary mr-3\"\r\n            to=\"/plugin/play-book/approval/instruction\"\r\n          >\r\n            <i class=\"fa fa-arrow-left mr-2\" /> List\r\n          </router-link>\r\n          <button\r\n            v-if=\"!!selectedIds.length || !!selectedStepIds.length\"\r\n            class=\"btn btn-primary mr-3\"\r\n            @click=\"$refs.modelSendInstructionRequest.open()\"\r\n          >\r\n            Sent {{ (selectedIds.length) }} {{ `Request${selectedIds.length > 1 ? 's' : ''}` }} <i class=\"fa fa-paper-plane\" />\r\n          </button>\r\n          <p-form-input\r\n            id=\"search-text\"\r\n            ref=\"searchText\"\r\n            name=\"search-text\"\r\n            placeholder=\"Search\"\r\n            :value=\"searchText\"\r\n            class=\"btn-block\"\r\n            @input=\"filterSearch\"\r\n          />\r\n        </div>\r\n        <hr>\r\n        <p-block-inner :is-loading=\"isLoading\">\r\n          <point-table>\r\n            <tr slot=\"p-head\">\r\n              <th>#</th>\r\n              <th>Name</th>\r\n              <th>Action</th>\r\n              <th>Status</th>\r\n              <th class=\"text-center\">\r\n                Edit\r\n              </th>\r\n            </tr>\r\n            <template\r\n              v-for=\"(instruction) in instructions\"\r\n            >\r\n              <tr\r\n                :key=\"instruction.id\"\r\n                slot=\"p-body\"\r\n              >\r\n                <td>\r\n                  <input\r\n                    v-model=\"form.ids[instruction.id]\"\r\n                    type=\"checkbox\"\r\n                    style=\"min-width: auto\"\r\n                  >\r\n                </td>\r\n                <td>\r\n                  {{ instruction.number }} - {{ instruction.name }}\r\n                </td>\r\n                <td>{{ instruction.approval_action | uppercase }}</td>\r\n                <td>\r\n                  <span\r\n                    class=\"badge\"\r\n                    :class=\"{ [instruction.approved_at ? 'badge-success' : 'badge-secondary']: true }\"\r\n                  >\r\n                    {{ instruction.approved_at ? 'APPROVED' : 'PENDING' }}\r\n                  </span>\r\n                </td>\r\n                <td class=\"text-center\">\r\n                  <button\r\n                    class=\"btn btn-sm btn-light\"\r\n                    :disabled=\"instruction.approved_at\"\r\n                    @click=\"instructionToEdit = instruction; $refs.modalEditInstruction.open()\"\r\n                  >\r\n                    <i class=\"fa fa-edit\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <tr\r\n                v-for=\"step in instruction.steps\"\r\n                :key=\"step.id\"\r\n                slot=\"p-body\"\r\n              >\r\n                <td />\r\n                <td>\r\n                  <i class=\"fa fa-long-arrow-right mr-2\" />\r\n                  {{ step.name }}\r\n                </td>\r\n                <td>\r\n                  {{ step.approval_action | uppercase }}\r\n                </td>\r\n                <td>\r\n                  <span\r\n                    class=\"badge\"\r\n                    :class=\"{ [step.approved_at ? 'badge-success' : 'badge-secondary']: true }\"\r\n                  >\r\n                    {{ step.approved_at ? 'APPROVED' : 'PENDING' }}\r\n                  </span>\r\n                </td>\r\n                <td class=\"text-center\">\r\n                  <button\r\n                    class=\"btn btn-sm btn-light\"\r\n                    :disabled=\"step.approved_at\"\r\n                    @click=\"stepToEdit = step; $refs.modalEditStep.open()\"\r\n                  >\r\n                    <i class=\"fa fa-edit\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </template>\r\n            <tr\r\n              v-if=\"instructions.length < 1\"\r\n              slot=\"p-body\"\r\n              class=\"text-center\"\r\n            >\r\n              <td\r\n                colspan=\"6\"\r\n                class=\"my-2 py-5\"\r\n              >\r\n                No data\r\n              </td>\r\n            </tr>\r\n          </point-table>\r\n        </p-block-inner>\r\n        <p-pagination\r\n          :current-page=\"page\"\r\n          :last-page=\"lastPage\"\r\n          @updatePage=\"updatePage\"\r\n        />\r\n      </p-block>\r\n    </div>\r\n\r\n    <m-status\r\n      ref=\"status\"\r\n      @choosen=\"onChoosenStatus\"\r\n    />\r\n    <m-send-instruction-request\r\n      ref=\"modelSendInstructionRequest\"\r\n      :ids=\"selectedIds\"\r\n      :step-ids=\"selectedStepIds\"\r\n      @added=\"getInstructions\"\r\n    />\r\n    <m-edit-instruction\r\n      ref=\"modalEditInstruction\"\r\n      :instruction=\"instructionToEdit\"\r\n      @added=\"getInstructions\"\r\n    />\r\n    <m-edit-instruction-step\r\n      ref=\"modalEditStep\"\r\n      :step=\"stepToEdit\"\r\n      @added=\"getInstructions\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Breadcrumb from '@/views/Breadcrumb'\r\nimport BreadcrumbPlugin from '@/views/plugin/Breadcrumb'\r\nimport BreadcrumbPlayBook from '@/views/plugin/play-book/Breadcrumb'\r\nimport TabMenu from './components/TabMenu'\r\nimport debounce from 'lodash/debounce'\r\nimport PointTable from 'point-table-vue'\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  components: {\r\n    Breadcrumb,\r\n    BreadcrumbPlugin,\r\n    BreadcrumbPlayBook,\r\n    PointTable,\r\n    TabMenu\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: true,\r\n      searchText: this.$route.query.search,\r\n      page: this.$route.query.page * 1 || 1,\r\n      limit: 10,\r\n      lastPage: 1,\r\n      isAdvanceFilter: false,\r\n      statusId: this.$route.query.statusId,\r\n      statusLabel: null,\r\n      form: {\r\n        ids: {},\r\n        stepIds: {}\r\n      },\r\n      instructionToEdit: null,\r\n      stepToEdit: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('pluginPlayBookInstructionApproval', ['instructions', 'pagination']),\r\n    selectedIds () {\r\n      const ids = []\r\n\r\n      for (const id in this.form.ids) {\r\n        if (this.form.ids[id]) {\r\n          ids.push(id)\r\n        }\r\n      }\r\n\r\n      return ids\r\n    },\r\n    selectedStepIds () {\r\n      const ids = []\r\n\r\n      for (const id in this.form.stepIds) {\r\n        if (this.form.stepIds[id]) {\r\n          ids.push(id)\r\n        }\r\n      }\r\n\r\n      return ids\r\n    }\r\n  },\r\n  watch: {\r\n    /**\r\n     * Select all steps id of an instruction id\r\n     */\r\n    'selectedIds' () {\r\n      this.form.stepIds = {}\r\n      this.selectedIds.forEach(id => {\r\n        const instruction = this.instructions.find(_instruction => _instruction.id === parseInt(id))\r\n\r\n        instruction.steps.forEach(_step => {\r\n          this.form.stepIds[`${_step.id}`] = true\r\n        })\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getInstructions()\r\n    this.$nextTick(() => {\r\n      this.$refs.searchText.setFocus()\r\n    })\r\n  },\r\n  updated () {\r\n    this.lastPage = this.pagination.last_page\r\n  },\r\n  methods: {\r\n    ...mapActions('pluginPlayBookInstructionApproval', [\r\n      'get'\r\n    ]),\r\n    onChoosenStatus (option) {\r\n      this.statusId = option.id\r\n      this.statusLabel = option.label\r\n      this.$router.push({\r\n        query: {\r\n          search: this.searchText,\r\n          statusId: this.statusId,\r\n          groupId: this.groupId,\r\n          pricingGroupId: this.pricingGroupId\r\n        }\r\n      })\r\n      this.getInstructions()\r\n    },\r\n    filterSearch: debounce(function (value) {\r\n      this.$router.push({\r\n        query: {\r\n          search: value,\r\n          statusId: this.statusId\r\n        }\r\n      })\r\n      this.searchText = value\r\n      this.page = 1\r\n      this.getInstructions()\r\n    }, 300),\r\n    async getInstructions () {\r\n      try {\r\n        this.isLoading = true\r\n        this.form.ids = {}\r\n        this.form.stepIds = {}\r\n        await this.get({\r\n          search: this.searchText,\r\n          page: this.page,\r\n          limit: this.limit,\r\n          status: this.status,\r\n          want: 'send'\r\n        })\r\n      } catch (error) {\r\n      } finally {\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    updatePage (value) {\r\n      this.page = value\r\n      this.getInstructions()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.row {\r\n  -webkit-user-select: none !important;\r\n  -webkit-touch-callout: none !important;\r\n  user-select: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstructionSend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstructionSend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstructionSend.vue?vue&type=template&id=4ae26681&\"\nimport script from \"./InstructionSend.vue?vue&type=script&lang=js&\"\nexport * from \"./InstructionSend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InstructionSend.vue?vue&type=style&index=0&id=4ae26681&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
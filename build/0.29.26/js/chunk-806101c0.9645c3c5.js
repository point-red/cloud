(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-806101c0"],{"055b":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-nowrap",staticStyle:{"overflow-x":"auto"}},[t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/request")},attrs:{to:"/purchase/request","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("purchase request"))))])]),t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/order")},attrs:{to:"/purchase/order","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("purchase order"))))])]),t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/down-payment")},attrs:{to:"/purchase/down-payment","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("down payment"))))])]),t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/receive")},attrs:{to:"/purchase/receive","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("purchase receive"))))])]),t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/invoice")},attrs:{to:"/purchase/invoice","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("purchase invoice"))))])]),t("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!e.isMatch("/purchase/payment-order")},attrs:{to:"/purchase/payment-order","active-class":"btn-primary"}},[t("span",[e._v(e._s(e._f("uppercase")(e.$t("payment order"))))])])],1)},a=[],i={data:function(){return{path:this.$route.path}},methods:{isMatch:function(e){return this.path.substring(0,e.length)==e}}},n=i,o=s("2877"),c=Object(o["a"])(n,r,a,!1,null,null,null);t["a"]=c.exports},"08e9":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("breadcrumb",[t("breadcrumb-purchase"),t("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/purchase/receive"}},[e._v(" "+e._s(e._f("uppercase")(e.$t("purchase receive")))+" ")]),t("span",{staticClass:"breadcrumb-item active"},[e._v(e._s(e._f("uppercase")(e.$t("create"))))])],1),t("purchase-menu"),t("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("p-block",[t("p-block-inner",{attrs:{"is-loading":e.isLoading}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6"},[t("h4",[e._v(e._s(e._f("uppercase")(e.$t("purchase receive"))))]),t("table",{staticClass:"table table-sm table-bordered"},[t("tr",[t("td",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e._f("uppercase")(e.$t("date")))+" ")]),t("td",[t("p-date-picker",{attrs:{id:"date",name:"date",label:e.$t("date"),errors:e.form.errors.get("date")},on:{errors:function(t){return e.form.errors.set("date",null)}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]),t("tr",[t("td",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e._f("uppercase")(e.$t("purchase order")))+" ")]),t("td",[t("span",{staticClass:"select-link",on:{click:function(t){return e.$refs.selectPurchaseOrder.open()}}},[e.purchaseReceive&&e.purchaseReceive.form.number?[e._v(" "+e._s(e.purchaseReceive.form.number)+" ")]:[e._v(" "+e._s(e._f("uppercase")(e.$t("select")))+" ")]],2)])]),t("tr",[t("td",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e._f("uppercase")(e.$t("warehouse")))+" ")]),t("td",[t("span",{staticClass:"select-link",on:{click:function(t){return e.$refs.warehouse.open()}}},[e.form.warehouse_id?[e._v(" "+e._s(e.form.warehouse_name)+" ")]:[e._v(" "+e._s(e._f("uppercase")(e.$t("select")))+" ")]],2)])]),t("tr",[t("td",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e._f("uppercase")(e.$t("driver")))+" ")]),t("td",[t("p-form-input",{attrs:{id:"driver",name:"driver",label:e.$t("driver"),errors:e.form.errors.get("driver")},on:{errors:function(t){return e.form.errors.set("driver",null)}},model:{value:e.form.driver,callback:function(t){e.$set(e.form,"driver",t)},expression:"form.driver"}})],1)]),t("tr",[t("td",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e._f("uppercase")(e.$t("license plate")))+" ")]),t("td",[t("p-form-input",{attrs:{id:"license plate",name:"license plate",label:e.$t("license plate"),errors:e.form.errors.get("license_plate")},on:{errors:function(t){return e.form.errors.set("license_plate",null)}},model:{value:e.form.license_plate,callback:function(t){e.$set(e.form,"license_plate",t)},expression:"form.license_plate"}})],1)])])]),t("div",{staticClass:"col-sm-6 text-right"},[t("div",{staticClass:"mb-30"},[t("h6",{staticClass:"mb-0"},[e._v(" "+e._s(e._f("uppercase")(e.authUser.tenant_name))+" ")]),e.authUser.branch?[e._v(" "+e._s(e._f("uppercase")(e.authUser.branch.address))+" "),e.authUser.branch.address?t("br"):e._e(),e._v(" "+e._s(e._f("uppercase")(e.authUser.branch.phone))+" "),e.authUser.branch.phone?t("br"):e._e()]:e._e()],2),t("div",[t("h6",{staticClass:"mb-0"},[e._v(" "+e._s(e._f("uppercase")(e.$t("from")))+": ")]),t("span",[e._v(e._s(e._f("uppercase")(e.form.supplier_label)))]),e.form.supplier_phone?t("div",{staticStyle:{"font-size":"12px"}},[e.form.supplier_address?t("br"):e._e(),e._v(e._s(e._f("uppercase")(e.form.supplier_address))+" "),e.form.supplier_phone?t("br"):e._e(),e._v(e._s(e.form.supplier_phone)+" "),e.form.supplier_email?t("br"):e._e(),e._v(e._s(e._f("uppercase")(e.form.supplier_email))+" ")]):e._e()])])]),t("hr"),t("point-table",[t("tr",{attrs:{slot:"p-head"},slot:"p-head"},[t("th",[e._v("#")]),t("th",{staticStyle:{"min-width":"120px"}},[e._v(" "+e._s(e._f("uppercase")(e.$t("item")))+" ")]),t("th",[e._v(e._s(e._f("uppercase")(e.$t("quantity remaining"))))]),t("th",[e._v(e._s(e._f("uppercase")(e.$t("quantity received"))))]),t("th",[t("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.toggleMore()}}},[t("i",{staticClass:"fa fa-ellipsis-h"})])])]),e._l(e.form.items,(function(s,r){return[t("tr",{key:"item-"+r,attrs:{slot:"p-body"},slot:"p-body"},[t("th",[e._v(e._s(r+1))]),t("td",[e._v(e._s(s.item_label))]),t("td",[e._v(e._s(e._f("numberFormat")(s.quantity_remaining))+" "+e._s(s.unit))]),t("td",[t("p-quantity",{attrs:{id:"quantity"+r,name:"quantity"+r,"item-id":s.item_id,units:s.units,unit:{name:s.unit,label:s.unit,converter:s.converter},max:1*s.quantity},on:{choosen:function(t){return e.chooseUnit(t,s)}},model:{value:s.quantity,callback:function(t){e.$set(s,"quantity",t)},expression:"row.quantity"}})],1),t("td",[e.isSaving?e._e():t("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){s.more=!s.more}}},[t("i",{staticClass:"fa fa-ellipsis-h"})])])]),s.more?[t("tr",{key:"ext-"+r,staticClass:"bg-gray-light",attrs:{slot:"p-body"},slot:"p-body"},[t("th",{staticClass:"bg-gray-light"}),t("td",{attrs:{colspan:"4"}},[t("p-form-row",{attrs:{id:"notes",name:"notes",label:e.$t("notes")},model:{value:s.notes,callback:function(t){e.$set(s,"notes",t)},expression:"row.notes"}})],1),t("td"),t("td")])]:e._e()]}))],2),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-9"}),t("div",{staticClass:"col-sm-3 text-center"},[t("h6",{staticClass:"mb-0"},[e._v(" "+e._s(e._f("uppercase")(e.$t("created by")))+" ")]),t("div",{staticClass:"mb-50",staticStyle:{"font-size":"11px"}},[e._v(" "+e._s(e._f("dateFormat")(Date.now(),"DD MMMM YYYY"))+" ")]),e._v(" "+e._s(e._f("uppercase")(e.requestedBy))+" "),t("div",{staticClass:"d-sm-block d-md-none mt-10"})]),t("div",{staticClass:"col-sm-12"},[t("hr"),t("button",{staticClass:"btn btn-block btn-sm btn-primary",attrs:{type:"submit",disabled:e.isSaving}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isSaving,expression:"isSaving"}],staticClass:"fa fa-asterisk fa-spin"}),e._v(" "+e._s(e._f("uppercase")(e.$t("save")))+" ")])])])],1)],1)],1)]),t("m-user",{ref:"approver",on:{choosen:e.chooseApprover}}),t("select-purchase-order",{ref:"selectPurchaseOrder",on:{choosen:e.choosePurchaseOrder}}),t("m-warehouse",{ref:"warehouse",attrs:{id:"warehouse",name:"warehouse"},on:{choosen:e.chooseWarehouse}})],1)},a=[],i=s("5530"),n=(s("d3b7"),s("159b"),s("b0c0"),s("d81d"),s("7db0"),s("4de4"),s("14d9"),s("e9c4"),s("055b")),o=s("5ae6"),c=s("861c"),l=s("b7ae"),u=s("feee"),p=s("6ae1"),m=s("2f62"),d={name:"Edit",components:{PurchaseMenu:n["a"],PointTable:u["a"],Breadcrumb:o["a"],BreadcrumbPurchase:c["a"],SelectPurchaseOrder:p["a"]},data:function(){return{isSaving:!1,isLoading:!1,requestedBy:localStorage.getItem("fullName"),purchaseOrder:null,warehouse:null,form:new l["a"]({increment_group:this.$moment().format("YYYYMM"),date:this.$moment().format("YYYY-MM-DD HH:mm:ss"),warehouse_id:null,warehouse_name:null,supplier_id:null,supplier_name:null,supplier_label:null,supplier_address:null,supplier_phone:null,supplier_email:null,driver:null,license_plate:null,items:[],request_approval_to:null,approver_name:null,approver_email:null})}},computed:Object(i["a"])(Object(i["a"])({},Object(m["c"])("purchaseReceive",["purchaseReceive"])),Object(m["c"])("auth",["authUser"])),created:function(){this.purchaseReceiveRequest()},methods:Object(i["a"])(Object(i["a"])({},Object(m["b"])("purchaseReceive",["find","update"])),{},{toggleMore:function(){var e=this.form.items.some((function(e,t){return!1===e.more}));this.form.items.forEach((function(t){t.more=e}))},chooseApprover:function(e){this.form.request_approval_to=e.id,this.form.approver_name=e.fullName,this.form.approver_email=e.email},chooseUnit:function(e,t){t.unit=e.label,t.converter=e.converter},chooseWarehouse:function(e){this.form.warehouse_id=e.id,this.form.warehouse_name=e.name},choosePurchaseOrder:function(e){this.purchaseOrder=e,this.form.purchase_order_id=e.id,this.form.items=e.items.map((function(e){return{purchase_order_item_id:e.id,item_id:e.item_id,item_name:e.item_name,item_label:e.item_name,unit:e.unit,units:e.item.units,quantity_remaining:e.quantity,quantity:e.quantity,converter:e.converter,notes:""}})),this.form.supplier_id=e.supplier.id,this.form.supplier_name=e.supplier.name,this.form.supplier_label=e.supplier.label,this.form.supplier_address=e.supplier.address,this.form.supplier_phone=e.supplier.phone,this.form.supplier_email=e.supplier.email},purchaseReceiveRequest:function(){var e=this;this.isLoading=!0,this.find({id:this.$route.params.id,params:{with_archives:!0,includes:"purchaseOrder.supplier;warehouse;items.item.units;purchaseOrder.form;purchaseOrder.items.item.units;form.createdBy;form.requestApprovalTo;form.branch"}}).then((function(t){e.purchaseReceive=t.data,e.form.id=t.data.id,e.form.driver=t.data.driver,e.form.license_plate=t.data.license_plate,e.choosePurchaseOrder(t.data.purchase_order),e.chooseWarehouse(t.data.warehouse)})).catch((function(t){e.$notification.error(t.message)})).finally((function(){e.isLoading=!1}))},onSubmit:function(){var e=this;this.isSaving=!0,this.form.increment_group=this.$moment(this.form.date).format("YYYYMM"),this.form.items=this.form.items.filter((function(e){return e.quantity})),this.update(this.form).then((function(t){e.$notification.success("update success"),Object.assign(e.$data,e.$options.data.call(e)),e.$router.push("/purchase/receive/"+t.data.id)})).catch((function(t){e.isSaving=!1;var s="";t.errors&&(s='<pre class="text-left">'+JSON.stringify(t.errors,null,2)+"</pre>"),e.$alert.error("Error Message",t.message+s),e.form.errors.record(t.errors)})).finally((function(){e.isSaving=!1}))}})},h=d,f=s("2877"),_=Object(f["a"])(h,r,a,!1,null,"7e60c688",null);t["default"]=_.exports},2186:function(e,t,s){},"6ae1":function(e,t,s){"use strict";s("b0c0");var r=function(){var e=this,t=e._self._c;return t("sweet-modal",{ref:"modal",attrs:{title:e._f("uppercase")("Select Purchase Order"),"overlay-theme":"dark"},on:{close:e.onClose}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchText},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),t("hr"),e.isLoading?t("div",[t("h3",{staticClass:"text-center"},[e._v(" Loading ... ")])]):t("div",{staticClass:"list-group push"},e._l(e.options,(function(s,r){return t("a",{key:"request-"+r,staticClass:"list-group-item list-group-item-action",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.choose(s)}}},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t("div",[t("strong",[e._v(e._s(s.form.number))])]),t("div",{staticClass:"text-black-50 text-right",staticStyle:{"font-size":"0.8em"}},[e._v(" Created by "+e._s(s.form.created_by.name)),t("br"),e._v(" "+e._s(e._f("dateFormat")(s.form.created_at,"DD MMMM YYYY HH:mm"))+" ")])]),t("table",{staticClass:"table mb-0",staticStyle:{"font-size":"11px"}},e._l(s.items,(function(s,r){return t("tr",{key:"item-"+r},[t("td",{staticClass:"pl-0"},[e._v(" "+e._s(s.item.name)+" ")]),t("td",{staticClass:"w-1 text-right text-nowrap"},[e._v(" "+e._s(s.quantity)+" "+e._s(s.unit)+" ")])])})),0)])})),0),e.searchText&&0==e.options.length&&!e.isLoading?t("div",{staticClass:"alert alert-info text-center"},[e._v(" "+e._s(e._f("capitalize")(e.$t("searching not found",[e.searchText])))+" ")]):e._e(),t("div",{staticClass:"pull-right"},[t("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(t){return e.clear()}}},[e._v(" "+e._s(e._f("uppercase")(e.$t("clear")))+" ")])])])},a=[],i=s("5530"),n=(s("a9e3"),s("ac1f"),s("841c"),s("d3b7"),s("b047")),o=s.n(n),c=s("2f62"),l={props:{id:{type:String,default:""},value:{type:[String,Number],default:""}},data:function(){return{index:null,searchText:"",options:[],selected:{},isLoading:!1}},watch:{searchText:o()((function(){this.search()}),300)},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])("purchaseOrder",["get"])),{},{search:function(){var e=this;this.isLoading=!0,this.get({params:{remaining_info:!0,join:"form,items,item",fields:"purchase_order.*",sort_by:"-form.number",group_by:"form.id",filter_form:"activePending;approvalApproved",filter_not_null:"form.number",includes:"items.item.units;form.createdBy;purchaseReceives.items"}}).then((function(t){e.options=t.data})).catch((function(t){e.$notification.error(t.message)})).finally((function(){e.isLoading=!1}))},clear:function(e){this.$emit("choosen",{id:null,form:{number:null}}),this.close()},choose:function(e){this.$emit("choosen",e),this.close()},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.index=e,this.search(),this.$refs.modal.open()},close:function(){this.$refs.modal.close()},onClose:function(){this.$emit("close",!0)}})},u=l,p=(s("ca91"),s("2877")),m=Object(p["a"])(u,r,a,!1,null,"018a5106",null);t["a"]=m.exports},"861c":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/purchase"}},[e._v(" "+e._s(e._f("uppercase")(e.$t("purchase")))+" ")])},a=[],i=s("2877"),n={},o=Object(i["a"])(n,r,a,!1,null,null,null);t["a"]=o.exports},ca91:function(e,t,s){"use strict";s("2186")}}]);
//# sourceMappingURL=chunk-806101c0.9645c3c5.js.map
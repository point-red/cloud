(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b82dcc"],{"208e":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/sales"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("sales")))+" ")])},r=[],n=s("2877"),o={},i=Object(n["a"])(o,a,r,!1,null,null,null);e["a"]=i.exports},"41a2":function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[t.salesReturn?e("breadcrumb",[e("breadcrumb-sales"),e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/sales/return"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("sales return ")))+" ")]),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")(t.salesReturn.form.number)))])],1):t._e(),e("sales-menu"),t.salesReturn.form.number?e("div",[e("p-show-form-approval-status",{attrs:{form:"sales return","is-loading":t.isLoading,"is-proccess-approval":t.isProccessApproval,"approval-status":t.salesReturn.form.approval_status,"approval-reason":t.salesReturn.form.approval_reason,"approved-by":t.salesReturn.form.request_approval_to.full_name,"cancellation-status":t.salesReturn.form.cancellation_status,"close-status":t.salesReturn.form.close_status},on:{onApprove:t.onApprove,onReject:t.onReject}}),e("p-show-form-cancellation-status",{attrs:{form:"sales return","is-loading":t.isLoading,"is-proccess-approval":t.isProccessCancellationApproval,"approved-by":t.salesReturn.form.request_approval_to.full_name,"cancellation-status":t.salesReturn.form.cancellation_status,"close-status":t.salesReturn.form.close_status,"cancellation-approval-reason":t.salesReturn.form.cancellation_approval_reason,"request-cancellation-reason":t.salesReturn.form.request_cancellation_reason},on:{onCancellationApprove:t.onCancellationApprove,onCancellationReject:t.onCancellationReject}}),e("p-show-form-close-status",{attrs:{form:"sales return","is-loading":t.isLoading,"is-proccess-approval":t.isProccessCloseApproval,"approved-by":t.salesReturn.form.request_approval_to.full_name,"close-status":t.salesReturn.form.close_status,"close-approval-reason":t.salesReturn.form.close_approval_reason,"request-close-reason":t.salesReturn.form.request_close_reason},on:{onCloseApprove:t.onCloseApprove,onCloseReject:t.onCloseReject}})],1):t._e(),t.salesReturn?e("div",{staticClass:"row"},[e("p-block",[e("p-block-inner",{attrs:{"is-loading":t.isLoading}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[t.salesReturn.form.edited_number?e("h3",[t._v(" "+t._s(t._f("uppercase")(t.$t("archive")))+" ")]):t._e(),t.salesReturn.form.number?e("span",[e("div",{staticClass:"text-right"},[t.$permission.has("create sales return")?e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mr-5",attrs:{to:{name:"sales.return.create"}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("create")))+" ")]):t._e(),t.$permission.has("update sales return")&&0===t.salesReturn.form.done?e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mr-5",attrs:{to:{name:"sales.return.edit",params:{id:t.salesReturn.id}}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("edit")))+" ")]):t._e(),null!=t.salesReturn.form.cancellation_status&&-1!=t.salesReturn.form.cancellation_status||!t.$permission.has("delete sales return")||0!==t.salesReturn.form.done?t._e():e("button",{staticClass:"btn btn-sm btn-outline-secondary mr-5",on:{click:function(e){return t.$refs.formRequestDelete.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("delete")))+" ")]),e("m-form-request-delete",{ref:"formRequestDelete",on:{delete:function(e){return t.onDelete(e)}}})],1)]):t._e(),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("h4",[t._v(t._s(t._f("uppercase")(t.$t("sales return"))))]),e("table",{staticClass:"table table-sm table-bordered"},[e("tr",[e("td",{staticClass:"font-weight-bold",attrs:{width:"150px"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("form number")))+" ")]),t.salesReturn.form.number?e("td",[t._v(" "+t._s(t.salesReturn.form.number)+" ")]):t._e(),t.salesReturn.form.edited_number?e("td",[t._v(" "+t._s(t.salesReturn.form.edited_number)+" ")]):t._e()]),e("tr",[e("td",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t._f("uppercase")(t.$t("date")))+" ")]),e("td",[t._v(t._s(t._f("dateFormat")(t.salesReturn.form.date,"DD MMMM YYYY")))])]),t.salesReturn.sales_invoice?e("tr",[e("td",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t._f("uppercase")(t.$t("reference")))+" ")]),e("td",[t._v(t._s(t.salesReturn.sales_invoice.form.number))])]):t._e()])]),e("div",{staticClass:"col-sm-6 text-right"},[e("h6",{staticClass:"mb-5"},[t._v(" "+t._s(t._f("uppercase")(t.authUser.tenant_name))+" ")]),t.salesReturn.form.branch?[t._v(" "+t._s(t._f("uppercase")(t.salesReturn.form.branch.address))+" "),t.salesReturn.form.branch.phone?e("br"):t._e(),t._v(t._s(t._f("uppercase")(t.salesReturn.form.branch.phone))+" ")]:t._e(),e("h6",{staticClass:"mt-30 mb-5"},[t._v(" "+t._s(t._f("uppercase")(t.$t("customer")))+" ")]),t._v(" "+t._s(t._f("uppercase")(t.salesReturn.customer.name))+" "),e("div",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t._f("uppercase")(t.salesReturn.customer.address))+" "),t.salesReturn.customer.phone?e("br"):t._e(),t._v(t._s(t.salesReturn.customer.phone)+" "),t.salesReturn.customer.email?e("br"):t._e(),t._v(t._s(t._f("uppercase")(t.salesReturn.customer.email))+" ")])],2)]),e("hr"),e("point-table",{staticClass:"mt-20"},[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",{staticClass:"text-center"},[t._v(" # ")]),e("th",{staticStyle:{"min-width":"120px"}},[t._v(" Item ")]),e("th",[t._v("Allocation")]),e("th",{staticClass:"text-right"},[t._v(" Quantity Sales ")]),e("th",{staticClass:"text-right"},[t._v(" Quantity Return ")]),e("th",{staticClass:"text-right"},[t._v(" Price Sales ")]),e("th",{staticClass:"text-right"},[t._v(" Total ")])]),t._l(t.salesReturn.items,(function(s,a){return[e("tr",{key:a,attrs:{slot:"p-body"},slot:"p-body"},[e("th",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),e("td",[t._v(t._s(s.item.name))]),e("td",[t._v(t._s(s.allocation&&s.allocation.name))]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(s.quantity_sales))+" "+t._s(s.unit)+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(s.quantity))+" "+t._s(s.unit)+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(s.price-s.discount_value))+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(s.quantity*(s.price-s.discount_value)))+" ")])])]})),e("tr",{attrs:{slot:"p-body"},slot:"p-body"},[e("th"),e("td"),e("td"),e("td"),e("td"),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("uppercase")(t.$t("sub total"))))])]),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("numberFormat")(t.subTotal)))])]),e("td")]),e("tr",{attrs:{slot:"p-body"},slot:"p-body"},[e("th"),e("td"),e("td"),e("td"),e("td"),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("uppercase")(t.$t("tax base"))))])]),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("numberFormat")(t.subTotal)))])]),e("td")]),e("tr",{attrs:{slot:"p-body"},slot:"p-body"},[e("th"),e("td"),e("td"),e("td"),e("td"),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("uppercase")(t.$t("tax"))))])]),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("numberFormat")(t.salesReturn.tax)))])]),e("td")]),e("tr",{attrs:{slot:"p-body"},slot:"p-body"},[e("th"),e("td"),e("td"),e("td"),e("td"),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("uppercase")(t.$t("total"))))])]),e("td",{staticClass:"text-right"},[e("b",[t._v(t._s(t._f("numberFormat")(t.salesReturn.amount)))])]),e("td")])],2),e("div",{staticClass:"row mt-50"},[e("div",{staticClass:"col-sm-6"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("notes")))+" ")]),e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(t.salesReturn.form.notes)+" ")]),e("div",{staticClass:"d-sm-block d-md-none mt-10"})]),e("div",{staticClass:"col-sm-3 text-center"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("requested by")))+" ")]),e("div",{staticClass:"mb-50",staticStyle:{"font-size":"11px"}},[t._v(" "+t._s(t._f("dateFormat")(t.salesReturn.form.date,"DD MMMM YYYY"))+" ")]),t._v(" "+t._s(t._f("uppercase")(t.salesReturn.form.created_by.full_name))+" "),e("div",{staticClass:"d-sm-block d-md-none mt-10"})]),e("div",{staticClass:"col-sm-3 text-center"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("approved by")))+" ")]),e("div",{staticClass:"mb-50",staticStyle:{"font-size":"11px"}},[t.salesReturn.form.approval_at?[t._v(" "+t._s(t._f("dateFormat")(t.salesReturn.form.approval_at,"DD MMMM YYYY"))+" ")]:[t._v(" _______________ ")]],2),t._v(" "+t._s(t._f("uppercase")(t.salesReturn.form.request_approval_to.full_name))+" "),e("div",{staticStyle:{"font-size":"11px"}},[t._v(" "+t._s(t._f("lowercase")(t.salesReturn.form.request_approval_to.email))+" ")])])])],1)]),e("hr")])],1)],1):t._e(),e("m-form-request-delete",{ref:"formRequestDelete",on:{delete:function(e){return t.onDelete(e)}}})],1)},r=[],n=s("5530"),o=(s("d3b7"),s("159b"),s("7db0"),s("14d9"),s("bea4")),i=s("5ae6"),l=s("208e"),c=s("feee"),u=s("2f62"),_={components:{SalesMenu:o["a"],Breadcrumb:i["a"],BreadcrumbSales:l["a"],PointTable:c["a"]},data:function(){return{id:this.$route.params.id,isLoading:!1,isDeleting:!1}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])("salesReturn",["salesReturn"])),Object(u["c"])("auth",["authUser"])),{},{subTotal:function(){var t=0;return this.salesReturn.items.forEach((function(e){e.total=e.quantity*(e.price-e.discount_value),t+=parseFloat(e.total)})),t}}),watch:{$route:function(t,e){t.params.id!=e.params.id&&(this.id=t.params.id,this.salesReturnRequest())}},created:function(){this.salesReturnRequest()},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["b"])("salesReturn",{find:"find",delete:"delete",approve:"approve",reject:"reject",cancellationApprove:"cancellationApprove",cancellationReject:"cancellationReject",sendReport:"sendReport"})),Object(u["b"])("salesReturnApproval",["send"])),{},{salesReturnRequest:function(){var t=this;this.isLoading=!0,this.find({id:this.id,params:{with_archives:!0,with_origin:!0,includes:"customer;items.item;items.allocation;items.salesInvoiceItem;salesInvoice.form;salesInvoice.items;form.createdBy;form.requestApprovalTo;form.branch"}}).catch((function(e){t.$notification.error(e.message)})).finally((function(){t.isLoading=!1}))},onDelete:function(t){var e=this;this.isDeleting=!0,this.delete({id:this.id,data:{reason:t||null}}).then((function(t){e.isDeleting=!1,e.$notification.success("cancel success"),e.salesReturnRequest(),e.send({ids:[{id:e.id}]}).catch((function(t){e.$notification.error(t.message),e.form.errors.record(t.errors)}))})).catch((function(t){e.isDeleting=!1,e.$notification.error(t.message),e.form.errors.record(t.errors)}))},onApprove:function(){var t=this;this.approve({id:this.id}).then((function(e){t.$notification.success("approve success"),t.salesReturnRequest()})).catch((function(e){t.$notification.error("Something error when approving sales return creation")}))},onReject:function(t){var e=this;this.reject({id:this.id,reason:t}).then((function(t){e.$notification.success("reject success"),e.salesReturnRequest()})).catch((function(t){e.$notification.error("Something error when rejecting sales return creation")}))},onCancellationApprove:function(){var t=this;this.cancellationApprove({id:this.id}).then((function(e){t.$notification.success("cancellation approved"),t.$router.push("/sales/return")})).catch((function(e){t.$notification.error("Something error when approving sales return cancellation")}))},onCancellationReject:function(t){var e=this;this.cancellationReject({id:this.id,reason:t}).then((function(t){e.$notification.success("cancellation rejected"),e.salesReturnRequest()})).catch((function(t){e.$notification.error("Something error when rejecting the invoice cancellation")}))}})},p=_,d=s("2877"),m=Object(d["a"])(p,a,r,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-51b82dcc.7ceb9510.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01fe655e"],{"0e0d":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/pos"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("pos")))+" ")])},i=[],r=s("2877"),n={},o=Object(r["a"])(n,a,i,!1,null,null,null);e["a"]=o.exports},feba:function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[e("breadcrumb",[e("breadcrumb-pos"),e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")(t.$t("open bill"))))])],1),e("pos-menu"),e("div",{staticClass:"row"},[e("p-block",{attrs:{title:t.$t("open bill"),header:!0}},[e("div",{staticClass:"row mb-10"},[e("p-date-range-picker",{staticClass:"col-sm-4",attrs:{id:"date",name:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),e("div",{staticClass:"input-group block"},[t.$permission.has("create pos")?e("router-link",{staticClass:"input-group-prepend",attrs:{to:"/pos/open-bill/create"}},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fa fa-plus"})])]):t._e(),e("p-form-input",{staticClass:"btn-block",attrs:{id:"search-text",name:"search-text",placeholder:"Search",value:t.searchText},on:{input:t.filterSearch}})],1),e("hr"),e("p-block-inner",{attrs:{"is-loading":t.isLoading}},[e("point-table",[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",[t._v("#")]),e("th",[t._v(t._s(t._f("titlecase")(t.$t("date"))))]),e("th",[t._v(t._s(t._f("titlecase")(t.$t("number"))))]),e("th",[t._v(t._s(t._f("titlecase")(t.$t("customer"))))]),e("th",[t._v(t._s(t._f("titlecase")(t.$t("amount"))))]),e("th",[t._v(" ")])]),t._l(t.bills,(function(s,a){return[e("tr",{key:"pb-"+a,attrs:{slot:"p-body"},slot:"p-body"},[e("th",[t._v(t._s(a+1+(t.currentPage-1)*t.limit))]),e("td",[t._v(t._s(t._f("dateFormat")(s.form.date,"DD MMMM YYYY HH:mm")))]),e("td",[e("router-link",{attrs:{to:{name:"pos.open-bill.show",params:{id:s.id}}}},[t._v(" "+t._s(s.form.number)+" ")])],1),e("td",[s.customer?[t._v(" "+t._s(s.customer.name)+" ")]:t._e()],2),e("td",[t._v(t._s(t._f("numberFormat")(s.amount)))]),e("td",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-sm btn-secondary mr-5",attrs:{to:{name:"pos.open-bill.edit",params:{id:s.id}}}},[e("i",{staticClass:"si si-note"}),t._v(" "+t._s(t._f("uppercase")(t.$t("edit")))+" ")]),t._v("   "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{disabled:t.isDeleting},on:{click:function(e){return t.deleteBill(s.id)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isDeleting,expression:"isDeleting"}],staticClass:"fa fa-asterisk fa-spin"}),t._v(" "+t._s(t._f("uppercase")(t.$t("delete")))+" ")])],1)])]}))],2)],1),e("p-pagination",{attrs:{"current-page":t.currentPage,"last-page":t.lastPage},on:{updatePage:t.updatePage}})],1)],1)],1)},i=[],r=s("5530"),n=(s("ac1f"),s("841c"),s("14d9"),s("5abf")),o=s("5ae6"),l=s("0e0d"),c=s("b047"),u=s.n(c),d=s("feee"),m=s("2f62"),h={components:{PosMenu:n["a"],Breadcrumb:o["a"],BreadcrumbPos:l["a"],PointTable:d["a"]},data:function(){return{isLoading:!0,isDeleting:!1,searchText:this.$route.query.search,currentPage:1*this.$route.query.page||1,lastPage:1,limit:10,date:{start:this.$route.query.date_from?this.$moment(this.$route.query.date_from).format("YYYY-MM-DD 00:00:00"):this.$moment().format("YYYY-MM-01 00:00:00"),end:this.$route.query.date_to?this.$moment(this.$route.query.date_to).format("YYYY-MM-DD 23:59:59"):this.$moment().format("YYYY-MM-DD 23:59:59")}}},computed:Object(r["a"])({},Object(m["c"])("posBill",["bills","pagination"])),watch:{date:function(){this.$router.push({query:Object(r["a"])(Object(r["a"])({},this.$route.query),{},{date_from:this.date.start,date_to:this.date.end})}),this.getBills()}},created:function(){this.getBills()},updated:function(){this.lastPage=this.pagination.last_page},methods:Object(r["a"])(Object(r["a"])({},Object(m["b"])("posBill",["get","delete"])),{},{filterSearch:u()((function(t){this.$router.push({query:Object(r["a"])(Object(r["a"])({},this.$route.query),{},{search:t})}),this.searchText=t,this.currentPage=1,this.getBills()}),300),getBills:function(){var t=this;this.isLoading=!0,this.get({params:{join:"form,customer",sort_by:"-forms.number",fields:"pos_bill.*",filter_form:"activePending",filter_equal:{"form.done":0},filter_like:{"form.number":this.searchText,"customer.name":this.searchText},filter_date_min:{"form.date":this.serverDateTime(this.$moment(this.date.start).format("YYYY-MM-DD 00:00:00"))},filter_date_max:{"form.date":this.serverDateTime(this.$moment(this.date.end).format("YYYY-MM-DD 23:59:59"))},limit:this.limit,includes:"form;customer",page:this.currentPage}}).then((function(e){t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.$notification.error(e.message)}))},updatePage:function(t){this.currentPage=t,this.getBills()},deleteBill:function(t){var e=this;this.isDeleting=!0,this.delete({id:t}).then((function(t){e.isDeleting=!1,e.$notification.success("delete success"),e.getBills()})).catch((function(t){e.isDeleting=!1,e.$notification.error(t.message)}))}})},p=h,f=s("2877"),b=Object(f["a"])(p,a,i,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-01fe655e.93042dfe.js.map
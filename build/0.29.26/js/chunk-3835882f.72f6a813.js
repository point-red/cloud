(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3835882f"],{"055b":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-nowrap",staticStyle:{"overflow-x":"auto"}},[e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/request")},attrs:{to:"/purchase/request","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("purchase request"))))])]),e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/order")},attrs:{to:"/purchase/order","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("purchase order"))))])]),e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/down-payment")},attrs:{to:"/purchase/down-payment","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("down payment"))))])]),e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/receive")},attrs:{to:"/purchase/receive","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("purchase receive"))))])]),e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/invoice")},attrs:{to:"/purchase/invoice","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("purchase invoice"))))])]),e("router-link",{staticClass:"btn mr-5 mb-15",class:{"btn-secondary":!t.isMatch("/purchase/payment-order")},attrs:{to:"/purchase/payment-order","active-class":"btn-primary"}},[e("span",[t._v(t._s(t._f("uppercase")(t.$t("payment order"))))])])],1)},r=[],c={data:function(){return{path:this.$route.path}},methods:{isMatch:function(t){return this.path.substring(0,t.length)==t}}},n=c,i=s("2877"),o=Object(i["a"])(n,a,r,!1,null,null,null);e["a"]=o.exports},5484:function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[t.purchaseRequest?e("breadcrumb",[e("breadcrumb-purchase"),e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/purchase/request"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("purchase request")))+" ")]),t.purchaseRequest.form.number?[e("span",{staticClass:"breadcrumb-item active"},[t._v(t._s(t._f("uppercase")(t.purchaseRequest.form.number)))])]:[t.purchaseRequest.origin?e("router-link",{staticClass:"breadcrumb-item",attrs:{to:{name:"purchase.request.show",params:{id:t.purchaseRequest.origin.id}}}},[t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.edited_number))+" ")]):t._e()]],2):t._e(),e("purchase-menu"),e("p-show-form-approval-status",{attrs:{"is-loading":t.isLoading,"approved-by":t.purchaseRequest.form.request_approval_to.full_name,"cancellation-status":t.purchaseRequest.form.cancellation_status,"approval-status":t.purchaseRequest.form.approval_status,"approval-reason":t.purchaseRequest.form.approval_reason},on:{onApprove:t.onApprove,onReject:t.onReject}}),e("p-show-form-cancellation-status",{attrs:{"is-loading":t.isLoading,"cancellation-status":t.purchaseRequest.form.cancellation_status,"cancellation-approval-reason":t.purchaseRequest.form.cancellation_approval_reason,"request-cancellation-reason":t.purchaseRequest.form.request_cancellation_reason},on:{onCancellationApprove:t.onCancellationApprove,onCancellationReject:t.onCancellationReject}}),t.purchaseRequest?e("div",{staticClass:"row"},[e("p-block",[e("p-block-inner",{attrs:{"is-loading":t.isLoading}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mr-5",attrs:{to:{name:"purchase.request.create"}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("create")))+" ")]),e("router-link",{staticClass:"btn btn-sm btn-outline-secondary mr-5",attrs:{to:{name:"purchase.request.edit",params:{id:t.id}}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("edit")))+" ")]),null==t.purchaseRequest.form.cancellation_status||-1==t.purchaseRequest.form.cancellation_status?e("button",{staticClass:"btn btn-sm btn-outline-secondary mr-5",on:{click:function(e){return t.$refs.formRequestDelete.open()}}},[t._v(" "+t._s(t._f("uppercase")(t.$t("delete")))+" ")]):t._e()],1)])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("h4",[t._v(t._s(t._f("uppercase")(t.$t("purchase request"))))]),e("table",{staticClass:"table table-sm table-bordered"},[e("tr",[e("td",{staticClass:"font-weight-bold",attrs:{width:"150px"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("form number")))+" ")]),e("td",[t._v(t._s(t.purchaseRequest.form.number))])]),e("tr",[e("td",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t._f("uppercase")(t.$t("required date")))+" ")]),e("td",[t._v(t._s(t._f("dateFormat")(t.purchaseRequest.required_date,"DD MMMM YYYY")))])])])]),e("div",{staticClass:"col-sm-6 text-right"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.authUser.tenant_name))+" ")]),t.purchaseRequest.form.branch?[t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.form.branch.address))),t.purchaseRequest.form.branch.address?e("br"):t._e(),t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.form.branch.phone))),t.purchaseRequest.form.branch.phone?e("br"):t._e()]:t._e()],2)]),e("hr"),e("point-table",{staticClass:"mt-20"},[e("tr",{attrs:{slot:"p-head"},slot:"p-head"},[e("th",{staticClass:"text-center"},[t._v(" # ")]),e("th",[t._v("Item")]),e("th",[t._v("Notes")]),e("th",{staticClass:"text-right"},[t._v(" Quantity ")]),e("th",{attrs:{width:"50px"}},[e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.toggleMore()}}},[e("i",{staticClass:"fa fa-ellipsis-h"})])])]),t._l(t.purchaseRequest.items,(function(s,a){return[e("tr",{key:a,attrs:{slot:"p-body"},slot:"p-body"},[e("th",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),e("td",[t._v(t._s(s.item.name))]),e("td",[t._v(t._s(s.notes))]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("numberFormat")(s.quantity))+" "+t._s(s.unit)+" ")]),e("td",[e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){s.more=!s.more}}},[e("i",{staticClass:"fa fa-ellipsis-h"})])])]),s.more?[e("tr",{key:"ext-"+a,staticClass:"bg-gray-light",attrs:{slot:"p-body"},slot:"p-body"},[e("th",{staticClass:"bg-gray-light"}),e("td",{attrs:{colspan:"4"}},[e("p-form-row",{attrs:{id:"allocation",name:"allocation",label:t.$t("allocation")}},[e("div",{staticClass:"col-lg-9 mt-5",attrs:{slot:"body"},slot:"body"},[s.allocation?[t._v(" "+t._s(s.allocation.name)+" ")]:t._e()],2)])],1)])]:t._e()]}))],2),e("div",{staticClass:"row mt-50"},[e("div",{staticClass:"col-sm-6"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("notes")))+" ")]),e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(t.purchaseRequest.form.notes)+" ")]),e("div",{staticClass:"d-sm-block d-md-none mt-10"})]),e("div",{staticClass:"col-sm-3 text-center"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("requested by")))+" ")]),e("div",{staticClass:"mb-50",staticStyle:{"font-size":"11px"}},[t._v(" "+t._s(t._f("dateFormat")(t.purchaseRequest.form.date,"DD MMMM YYYY"))+" ")]),t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.form.created_by.first_name))+" "+t._s(t._f("uppercase")(t.purchaseRequest.form.created_by.last_name))+" "),e("div",{staticClass:"d-sm-block d-md-none mt-10"})]),e("div",{staticClass:"col-sm-3 text-center"},[e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t._f("uppercase")(t.$t("approved by")))+" ")]),e("div",{staticClass:"mb-50",staticStyle:{"font-size":"11px"}},[t.purchaseRequest.form.approval_at?[t._v(" "+t._s(t._f("dateFormat")(t.purchaseRequest.form.approval_at,"DD MMMM YYYY"))+" ")]:[t._v(" _______________ ")]],2),t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.form.request_approval_to.full_name))+" "),e("div",{staticStyle:{"font-size":"9px"}},[t._v(" "+t._s(t._f("uppercase")(t.purchaseRequest.form.request_approval_to.email))+" ")])])])],1)],1)],1):t._e(),e("m-form-request-delete",{ref:"formRequestDelete",on:{delete:function(e){return t.onDelete(e)}}})],1)},r=[],c=s("5530"),n=(s("d3b7"),s("159b"),s("7db0"),s("14d9"),s("055b")),i=s("5ae6"),o=s("861c"),u=s("feee"),l=s("2f62"),p={components:{PurchaseMenu:n["a"],Breadcrumb:i["a"],BreadcrumbPurchase:o["a"],PointTable:u["a"]},data:function(){return{id:this.$route.params.id,rows:[],isLoading:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])("purchaseRequest",["purchaseRequest"])),Object(l["c"])("auth",["authUser"])),watch:{$route:function(t,e){t.params.id!=e.params.id&&(this.id=t.params.id,this.findPurchaseRequisition())}},created:function(){this.findPurchaseRequisition()},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])("purchaseRequest",{find:"find",delete:"delete",approve:"approve",reject:"reject",cancellationApprove:"cancellationApprove",cancellationReject:"cancellationReject"})),{},{toggleMore:function(){var t=this.purchaseRequest.items.some((function(t,e){return!1===t.more}));this.purchaseRequest.items.forEach((function(e){e.more=t}))},findPurchaseRequisition:function(){var t=this;this.isLoading=!0,this.find({id:this.id,params:{with_archives:!0,with_origin:!0,includes:"items.item;items.allocation;form.requestApprovalTo;form.branch"}}).then((function(e){t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.$notification.error(e.message)}))},onDelete:function(t){var e=this;this.delete({id:this.id,data:{reason:t}}).then((function(t){e.$notification.success("cancel success"),e.findPurchaseRequisition()}))},onApprove:function(){var t=this;this.approve({id:this.id}).then((function(e){t.$notification.success("approval approved"),t.findPurchaseRequisition()}))},onReject:function(t){var e=this;this.reject({id:this.id,reason:t}).then((function(t){e.$notification.success("approval rejected"),e.findPurchaseRequisition()}))},onCancellationApprove:function(){var t=this;this.cancellationApprove({id:this.id}).then((function(e){t.$notification.success("cancellation approved"),t.$router.push("/purchase/request")}))},onCancellationReject:function(t){var e=this;this.cancellationReject({id:this.id,reason:t}).then((function(t){e.$notification.success("cancellation rejected"),e.findPurchaseRequisition()})).catch((function(t){console.log(t.message)}))}})},h=p,_=s("2877"),d=Object(_["a"])(h,a,r,!1,null,null,null);e["default"]=d.exports},"861c":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"breadcrumb-item",attrs:{to:"/purchase"}},[t._v(" "+t._s(t._f("uppercase")(t.$t("purchase")))+" ")])},r=[],c=s("2877"),n={},i=Object(c["a"])(n,a,r,!1,null,null,null);e["a"]=i.exports}}]);
//# sourceMappingURL=chunk-3835882f.72f6a813.js.map
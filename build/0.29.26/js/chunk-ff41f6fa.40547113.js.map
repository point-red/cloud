{"version":3,"sources":["webpack:///./src/views/plugin/play-book/Breadcrumb.vue","webpack:///./src/views/plugin/play-book/Breadcrumb.vue?5ddc","webpack:///./src/views/plugin/play-book/approval/components/TabMenu.vue","webpack:///./src/views/plugin/play-book/approval/components/TabMenu.vue?7e43","webpack:///./src/views/plugin/play-book/approval/Instruction.vue","webpack:///src/views/plugin/play-book/approval/Instruction.vue","webpack:///./src/views/plugin/play-book/approval/Instruction.vue?909f","webpack:///./src/views/plugin/play-book/approval/Instruction.vue?48f3","webpack:///./src/views/plugin/play-book/approval/Instruction.vue?f9eb"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","_s","_f","$t","staticRenderFns","script","component","_t","$permission","has","_e","ref","searchText","on","filterSearch","isLoading","slot","_l","instructions","instruction","index","key","id","page","limit","approved_at","authUser","approval_request_to","number","name","$event","stopPropagation","showInstructionModal","Date","approval_request_at","toLocaleString","procedure","code","approver","approval_action","approval_note","class","getClasses","getStatus","steps","step","showInstructionStepModal","length","lastPage","updatePage","onChoosenStatus","selectedInstructionId","getInstructions","selectedStep","components","Breadcrumb","BreadcrumbPlugin","BreadcrumbPlayBook","PointTable","TabMenu","data","isAdvanceFilter","statusId","statusLabel","computed","mapGetters","mounted","updated","methods","mapActions","query","search","groupId","pricingGroupId","status","btnClass"],"mappings":"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","file":"js/chunk-ff41f6fa.40547113.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('router-link',{staticClass:\"breadcrumb-item\",attrs:{\"to\":\"/plugin/play-book\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(_vm.$t('play book')))+\" \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Breadcrumb.vue?vue&type=template&id=dec76a66&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"nav nav-tabs nav-tabs-alt mb-10\",attrs:{\"data-toggle\":\"tabs\",\"role\":\"tablist\"}},[_vm._t(\"default\"),(_vm.$permission.has('create play book procedure'))?_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/plugin/play-book/approval/procedure\",\"active-class\":\"active\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"uppercase\")(_vm.$t('procedure'))))])])],1):_vm._e(),(_vm.$permission.has('create play book instruction'))?_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/plugin/play-book/approval/instruction\",\"active-class\":\"active\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"uppercase\")(_vm.$t('instruction'))))])])],1):_vm._e(),_vm._t(\"right\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./TabMenu.vue?vue&type=template&id=3a66df3c&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('breadcrumb',[_c('breadcrumb-plugin'),_c('breadcrumb-play-book'),_c('span',{staticClass:\"breadcrumb-item active\"},[_vm._v(_vm._s(_vm._f(\"uppercase\")('Approval')))]),_c('span',{staticClass:\"breadcrumb-item active\"},[_vm._v(_vm._s(_vm._f(\"uppercase\")('Instruction')))])],1),_c('tab-menu'),_c('div',{staticClass:\"row mb-5\"},[_c('p-block',[_c('div',{staticClass:\"input-group block mb-5\"},[(_vm.$permission.has('create play book instruction'))?_c('router-link',{staticClass:\"btn btn-outline-primary mr-3\",attrs:{\"to\":\"/plugin/play-book/approval/instruction/send\"}},[_vm._v(\" Sent Request \"),_c('i',{staticClass:\"fa fa-paper-plane\"})]):_vm._e(),_c('p-form-input',{ref:\"searchText\",staticClass:\"btn-block\",attrs:{\"id\":\"search-text\",\"name\":\"search-text\",\"placeholder\":\"Search\",\"value\":_vm.searchText},on:{\"input\":_vm.filterSearch}})],1),_c('hr'),_c('p-block-inner',{attrs:{\"is-loading\":_vm.isLoading}},[(!_vm.$permission.has('approve play book instruction'))?_c('div',{staticClass:\"alert alert-danger\"},[_c('span',[_vm._v(\"You don't have permission to see this page\")])]):_c('point-table',[_c('tr',{attrs:{\"slot\":\"p-head\"},slot:\"p-head\"},[_c('th',{attrs:{\"width\":\"50px\"}},[_vm._v(\" # \")]),_c('th',[_vm._v(\"Number\")]),_c('th',[_vm._v(\"Procedure\")]),_c('th',[_vm._v(\"To\")]),_c('th',[_vm._v(\"Action\")]),_c('th',[_vm._v(\"Note\")]),_c('th',[_vm._v(\"Status\")])]),_vm._l((_vm.instructions),function(instruction,index){return [_c('tr',{key:instruction.id,attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('th',[_vm._v(_vm._s((++index) + ((_vm.page - 1) * _vm.limit)))]),_c('td',[_c('div',[(!instruction.approved_at && _vm.authUser.id === instruction.approval_request_to)?_c('a',{attrs:{\"href\":`#${instruction.id}`},on:{\"click\":function($event){$event.stopPropagation();return _vm.showInstructionModal(instruction.id)}}},[_vm._v(\" \"+_vm._s(instruction.number)+\" - \"+_vm._s(instruction.name)+\" \")]):_c('span',[_vm._v(\" \"+_vm._s(instruction.number)+\" - \"+_vm._s(instruction.name)+\" \")])]),_c('span',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(new Date(instruction.approval_request_at).toLocaleString())+\" \")])]),_c('td',[_c('router-link',{attrs:{\"to\":`/plugin/play-book/procedure/${instruction.procedure.id}`}},[_vm._v(\" \"+_vm._s(instruction.procedure.code)+\" - \"+_vm._s(instruction.procedure.name)+\" \")])],1),_c('td',[_vm._v(_vm._s(_vm._f(\"uppercase\")(instruction.approver.name)))]),_c('td',[_vm._v(_vm._s(_vm._f(\"uppercase\")(instruction.approval_action)))]),_c('td',[_vm._v(_vm._s(instruction.approval_note || '-'))]),_c('td',[_c('span',{staticClass:\"badge\",class:_vm.getClasses(instruction)},[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(_vm.getStatus(instruction)))+\" \")])])]),_vm._l((instruction.steps),function(step){return _c('tr',{key:step.id,attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('td'),_c('td',{attrs:{\"colspan\":\"2\"}},[_c('div',{staticClass:\"d-flex align-items-center\"},[_c('i',{staticClass:\"fa fa-long-arrow-right mr-3\"}),_c('div',[_c('div',[(!step.approved_at)?_c('a',{attrs:{\"href\":`#step-${step.id}`},on:{\"click\":function($event){$event.stopPropagation();return _vm.showInstructionStepModal(step)}}},[_vm._v(\" \"+_vm._s(step.name)+\" \")]):_c('span',[_vm._v(_vm._s(step.name))])]),_c('span',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(new Date(instruction.approval_request_at).toLocaleString())+\" \")])])])]),_c('td',[_vm._v(_vm._s(_vm._f(\"uppercase\")(instruction.approver.name)))]),_c('td',[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(step.approval_action))+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(step.approval_note || '-')+\" \")]),_c('td',[_c('span',{staticClass:\"badge\",class:_vm.getClasses(step)},[_vm._v(\" \"+_vm._s(_vm._f(\"uppercase\")(_vm.getStatus(step)))+\" \")])])])})]}),(_vm.instructions.length < 1)?_c('tr',{staticClass:\"text-center\",attrs:{\"slot\":\"p-body\"},slot:\"p-body\"},[_c('td',{staticClass:\"my-2 py-5\",attrs:{\"colspan\":\"6\"}},[_vm._v(\" No data \")])]):_vm._e()],2)],1),_c('p-pagination',{attrs:{\"current-page\":_vm.page,\"last-page\":_vm.lastPage},on:{\"updatePage\":_vm.updatePage}})],1)],1),_c('m-status',{ref:\"status\",on:{\"choosen\":_vm.onChoosenStatus}}),_c('m-show-instruction',{ref:\"modalShowInstruction\",attrs:{\"instruction-id\":_vm.selectedInstructionId},on:{\"added\":_vm.getInstructions}}),_c('m-show-instruction-step',{ref:\"modalShowInstructionStep\",attrs:{\"step\":_vm.selectedStep},on:{\"added\":_vm.getInstructions}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <breadcrumb>\r\n      <breadcrumb-plugin />\r\n      <breadcrumb-play-book />\r\n      <span class=\"breadcrumb-item active\">{{ 'Approval' | uppercase }}</span>\r\n      <span class=\"breadcrumb-item active\">{{ 'Instruction' | uppercase }}</span>\r\n    </breadcrumb>\r\n\r\n    <tab-menu />\r\n\r\n    <div class=\"row mb-5\">\r\n      <p-block>\r\n        <div class=\"input-group block mb-5\">\r\n          <router-link\r\n            v-if=\"$permission.has('create play book instruction')\"\r\n            class=\"btn btn-outline-primary mr-3\"\r\n            to=\"/plugin/play-book/approval/instruction/send\"\r\n          >\r\n            Sent Request <i class=\"fa fa-paper-plane\" />\r\n          </router-link>\r\n          <p-form-input\r\n            id=\"search-text\"\r\n            ref=\"searchText\"\r\n            name=\"search-text\"\r\n            placeholder=\"Search\"\r\n            :value=\"searchText\"\r\n            class=\"btn-block\"\r\n            @input=\"filterSearch\"\r\n          />\r\n        </div>\r\n        <hr>\r\n        <p-block-inner :is-loading=\"isLoading\">\r\n          <div\r\n            v-if=\"!$permission.has('approve play book instruction')\"\r\n            class=\"alert alert-danger\"\r\n          >\r\n            <span>You don't have permission to see this page</span>\r\n          </div>\r\n          <point-table v-else>\r\n            <tr slot=\"p-head\">\r\n              <th width=\"50px\">\r\n                #\r\n              </th>\r\n              <th>Number</th>\r\n              <th>Procedure</th>\r\n              <th>To</th>\r\n              <th>Action</th>\r\n              <th>Note</th>\r\n              <th>Status</th>\r\n            </tr>\r\n            <template\r\n              v-for=\"(instruction, index) in instructions\"\r\n            >\r\n              <tr\r\n                :key=\"instruction.id\"\r\n                slot=\"p-body\"\r\n              >\r\n                <th>{{ (++index) + ((page - 1) * limit) }}</th>\r\n                <td>\r\n                  <div>\r\n                    <a\r\n                      v-if=\"!instruction.approved_at && authUser.id === instruction.approval_request_to\"\r\n                      :href=\"`#${instruction.id}`\"\r\n                      @click.stop=\"showInstructionModal(instruction.id)\"\r\n                    >\r\n                      {{ instruction.number }} - {{ instruction.name }}\r\n                    </a>\r\n                    <span v-else>\r\n                      {{ instruction.number }} - {{ instruction.name }}\r\n                    </span>\r\n                  </div>\r\n                  <span class=\"text-muted\">\r\n                    {{ new Date(instruction.approval_request_at).toLocaleString() }}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <router-link :to=\"`/plugin/play-book/procedure/${instruction.procedure.id}`\">\r\n                    {{ instruction.procedure.code }} - {{ instruction.procedure.name }}\r\n                  </router-link>\r\n                </td>\r\n                <td>{{ instruction.approver.name | uppercase }}</td>\r\n                <td>{{ instruction.approval_action | uppercase }}</td>\r\n                <td>{{ instruction.approval_note || '-' }}</td>\r\n                <td>\r\n                  <span\r\n                    class=\"badge\"\r\n                    :class=\"getClasses(instruction)\"\r\n                  >\r\n                    {{ getStatus(instruction) | uppercase }}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n              <tr\r\n                v-for=\"step in instruction.steps\"\r\n                :key=\"step.id\"\r\n                slot=\"p-body\"\r\n              >\r\n                <td />\r\n                <td colspan=\"2\">\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <i class=\"fa fa-long-arrow-right mr-3\" />\r\n                    <div>\r\n                      <div>\r\n                        <a\r\n                          v-if=\"!step.approved_at\"\r\n                          :href=\"`#step-${step.id}`\"\r\n                          @click.stop=\"showInstructionStepModal(step)\"\r\n                        >\r\n                          {{ step.name }}\r\n                        </a>\r\n                        <span v-else>{{ step.name }}</span>\r\n                      </div>\r\n                      <span class=\"text-muted\">\r\n                        {{ new Date(instruction.approval_request_at).toLocaleString() }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td>{{ instruction.approver.name | uppercase }}</td>\r\n                <td>\r\n                  {{ step.approval_action | uppercase }}\r\n                </td>\r\n                <td>\r\n                  {{ step.approval_note || '-' }}\r\n                </td>\r\n                <td>\r\n                  <span\r\n                    class=\"badge\"\r\n                    :class=\"getClasses(step)\"\r\n                  >\r\n                    {{ getStatus(step) | uppercase }}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            </template>\r\n            <tr\r\n              v-if=\"instructions.length < 1\"\r\n              slot=\"p-body\"\r\n              class=\"text-center\"\r\n            >\r\n              <td\r\n                colspan=\"6\"\r\n                class=\"my-2 py-5\"\r\n              >\r\n                No data\r\n              </td>\r\n            </tr>\r\n          </point-table>\r\n        </p-block-inner>\r\n        <p-pagination\r\n          :current-page=\"page\"\r\n          :last-page=\"lastPage\"\r\n          @updatePage=\"updatePage\"\r\n        />\r\n      </p-block>\r\n    </div>\r\n\r\n    <m-status\r\n      ref=\"status\"\r\n      @choosen=\"onChoosenStatus\"\r\n    />\r\n    <m-show-instruction\r\n      ref=\"modalShowInstruction\"\r\n      :instruction-id=\"selectedInstructionId\"\r\n      @added=\"getInstructions\"\r\n    />\r\n    <m-show-instruction-step\r\n      ref=\"modalShowInstructionStep\"\r\n      :step=\"selectedStep\"\r\n      @added=\"getInstructions\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Breadcrumb from '@/views/Breadcrumb'\r\nimport BreadcrumbPlugin from '@/views/plugin/Breadcrumb'\r\nimport BreadcrumbPlayBook from '@/views/plugin/play-book/Breadcrumb'\r\nimport TabMenu from './components/TabMenu'\r\nimport debounce from 'lodash/debounce'\r\nimport PointTable from 'point-table-vue'\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  components: {\r\n    Breadcrumb,\r\n    BreadcrumbPlugin,\r\n    BreadcrumbPlayBook,\r\n    PointTable,\r\n    TabMenu\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: true,\r\n      searchText: this.$route.query.search,\r\n      page: this.$route.query.page * 1 || 1,\r\n      limit: 10,\r\n      lastPage: 1,\r\n      isAdvanceFilter: false,\r\n      statusId: this.$route.query.statusId,\r\n      statusLabel: null,\r\n      selectedInstructionId: null,\r\n      selectedStep: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('auth', ['authUser']),\r\n    ...mapGetters('pluginPlayBookInstructionApproval', ['instructions', 'pagination'])\r\n  },\r\n  mounted () {\r\n    this.getInstructions().then(() => {\r\n      if (this.$route.query.step_id && this.$route.query.action) {\r\n        let step = null\r\n\r\n        this.instructions.forEach(_ins => {\r\n          step = _ins.steps.find(_step => _step.id === parseInt(this.$route.query.step_id))\r\n        })\r\n\r\n        this.showInstructionStepModal(step)\r\n      }\r\n\r\n      if (this.$route.query.id && this.$route.query.action) {\r\n        this.showInstructionModal(this.$route.query.id)\r\n      }\r\n    })\r\n    this.$nextTick(() => {\r\n      this.$refs.searchText.setFocus()\r\n    })\r\n  },\r\n  updated () {\r\n    this.lastPage = this.pagination.last_page\r\n  },\r\n  methods: {\r\n    ...mapActions('pluginPlayBookInstructionApproval', [\r\n      'get'\r\n    ]),\r\n    onChoosenStatus (option) {\r\n      this.statusId = option.id\r\n      this.statusLabel = option.label\r\n      this.$router.push({\r\n        query: {\r\n          search: this.searchText,\r\n          statusId: this.statusId,\r\n          groupId: this.groupId,\r\n          pricingGroupId: this.pricingGroupId\r\n        }\r\n      })\r\n      this.getInstructions()\r\n    },\r\n    filterSearch: debounce(function (value) {\r\n      this.$router.push({\r\n        query: {\r\n          search: value,\r\n          statusId: this.statusId\r\n        }\r\n      })\r\n      this.searchText = value\r\n      this.page = 1\r\n      this.getInstructions()\r\n    }, 300),\r\n    async getInstructions () {\r\n      try {\r\n        this.isLoading = true\r\n        await this.get({\r\n          search: this.searchText,\r\n          page: this.page,\r\n          limit: this.limit,\r\n          status: this.status\r\n        })\r\n      } catch (error) {\r\n      } finally {\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    getStatus (request) {\r\n      return request.approved_at\r\n        ? 'approved' : (request.declined_at\r\n          ? 'declined' : 'pending'\r\n        )\r\n    },\r\n    getClasses (request) {\r\n      const btnClass = request.approved_at\r\n        ? 'btn-success' : (request.declined_at\r\n          ? 'btn-danger' : 'btn-secondary'\r\n        )\r\n\r\n      return {\r\n        [btnClass]: true\r\n      }\r\n    },\r\n    updatePage (value) {\r\n      this.page = value\r\n      this.getInstructions()\r\n    },\r\n    showInstructionModal (instructionId) {\r\n      this.selectedInstructionId = instructionId\r\n      this.$refs.modalShowInstruction.open()\r\n    },\r\n    showInstructionStepModal (step) {\r\n      this.selectedStep = step\r\n      this.$refs.modalShowInstructionStep.open()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.row {\r\n  -webkit-user-select: none !important;\r\n  -webkit-touch-callout: none !important;\r\n  user-select: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Instruction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Instruction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Instruction.vue?vue&type=template&id=7a6f3cf4&\"\nimport script from \"./Instruction.vue?vue&type=script&lang=js&\"\nexport * from \"./Instruction.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Instruction.vue?vue&type=style&index=0&id=7a6f3cf4&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Instruction.vue?vue&type=style&index=0&id=7a6f3cf4&prod&lang=scss&\""],"sourceRoot":""}